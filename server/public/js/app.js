let base_url = "";
let SOLID_SPORT_BET_ABI = [
    {
        "constant": false,
        "inputs": [
            {
                "name": "myid",
                "type": "bytes32"
            },
            {
                "name": "res",
                "type": "string"
            }
        ],
        "name": "__callback",
        "outputs": [],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "constant": false,
        "inputs": [
            {
                "name": "myid",
                "type": "bytes32"
            },
            {
                "name": "result",
                "type": "string"
            },
            {
                "name": "proof",
                "type": "bytes"
            }
        ],
        "name": "__callback",
        "outputs": [],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "constant": false,
        "inputs": [
            {
                "name": "_owner",
                "type": "address"
            }
        ],
        "name": "transferOwner",
        "outputs": [],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "details",
        "outputs": [
            {
                "name": "_matchId",
                "type": "uint256"
            },
            {
                "name": "_league",
                "type": "bytes32"
            },
            {
                "name": "_teamOne",
                "type": "bytes32"
            },
            {
                "name": "_teamTwo",
                "type": "bytes32"
            },
            {
                "name": "_matchTimestamp",
                "type": "uint256"
            },
            {
                "name": "_executionDelay",
                "type": "uint256"
            },
            {
                "name": "_price",
                "type": "uint256"
            },
            {
                "name": "_status",
                "type": "uint256"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": false,
        "inputs": [
            {
                "name": "scoreOne",
                "type": "uint256"
            },
            {
                "name": "scoreTwo",
                "type": "uint256"
            }
        ],
        "name": "subscribe",
        "outputs": [],
        "payable": true,
        "stateMutability": "payable",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "matchResult",
        "outputs": [
            {
                "name": "scoreOne",
                "type": "uint256"
            },
            {
                "name": "scoreTwo",
                "type": "uint256"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "name": "_matchId",
                "type": "uint256"
            },
            {
                "name": "_league",
                "type": "bytes32"
            },
            {
                "name": "_teamOne",
                "type": "bytes32"
            },
            {
                "name": "_teamTwo",
                "type": "bytes32"
            },
            {
                "name": "_matchTimestamp",
                "type": "uint256"
            },
            {
                "name": "_executionDelay",
                "type": "uint256"
            },
            {
                "name": "_price",
                "type": "uint256"
            }
        ],
        "payable": true,
        "stateMutability": "payable",
        "type": "constructor"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": false,
                "name": "result",
                "type": "string"
            }
        ],
        "name": "OraclizeLog",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": true,
                "name": "addr",
                "type": "address"
            },
            {
                "indexed": false,
                "name": "scoreOne",
                "type": "uint256"
            },
            {
                "indexed": false,
                "name": "scoreTwo",
                "type": "uint256"
            }
        ],
        "name": "newSubscriber",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": true,
                "name": "addr",
                "type": "address"
            },
            {
                "indexed": false,
                "name": "reward",
                "type": "uint256"
            }
        ],
        "name": "newWinner",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": false,
                "name": "scoreOne",
                "type": "uint256"
            },
            {
                "indexed": false,
                "name": "scoreTwo",
                "type": "uint256"
            }
        ],
        "name": "betResolved",
        "type": "event"
    }
];
let SOLID_CRYPTO_BET_ABI = [
    {
        "constant": false,
        "inputs": [
            {
                "name": "guess",
                "type": "uint256"
            }
        ],
        "name": "subscribe",
        "outputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "payable": true,
        "stateMutability": "payable",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "status",
        "outputs": [
            {
                "name": "",
                "type": "uint8"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": false,
        "inputs": [
            {
                "name": "myid",
                "type": "bytes32"
            },
            {
                "name": "res",
                "type": "string"
            }
        ],
        "name": "__callback",
        "outputs": [],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "constant": false,
        "inputs": [
            {
                "name": "myid",
                "type": "bytes32"
            },
            {
                "name": "result",
                "type": "string"
            },
            {
                "name": "proof",
                "type": "bytes"
            }
        ],
        "name": "__callback",
        "outputs": [],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "constant": false,
        "inputs": [],
        "name": "unpause",
        "outputs": [],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "closureDelay",
        "outputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [
            {
                "name": "",
                "type": "address"
            }
        ],
        "name": "guesses",
        "outputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": false,
        "inputs": [],
        "name": "recallOraclize",
        "outputs": [],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "name": "subscribers",
        "outputs": [
            {
                "name": "",
                "type": "address"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "paused",
        "outputs": [
            {
                "name": "",
                "type": "bool"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "counter",
        "outputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "result",
        "outputs": [
            {
                "name": "",
                "type": "string"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": false,
        "inputs": [],
        "name": "pause",
        "outputs": [],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "executionDelay",
        "outputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "owner",
        "outputs": [
            {
                "name": "",
                "type": "address"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "winGuess",
        "outputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "name": "winners",
        "outputs": [
            {
                "name": "",
                "type": "address"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "subscriptionPrice",
        "outputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "winReward",
        "outputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "currency",
        "outputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": false,
        "inputs": [],
        "name": "end",
        "outputs": [],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "constant": false,
        "inputs": [
            {
                "name": "newOwner",
                "type": "address"
            }
        ],
        "name": "transferOwnership",
        "outputs": [],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "name": "_creator",
                "type": "address"
            },
            {
                "name": "_currency",
                "type": "uint256"
            },
            {
                "name": "_closureDelay",
                "type": "uint256"
            },
            {
                "name": "_executionDelay",
                "type": "uint256"
            },
            {
                "name": "_subscriptionPrice",
                "type": "uint256"
            }
        ],
        "payable": true,
        "stateMutability": "payable",
        "type": "constructor"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": false,
                "name": "_old",
                "type": "uint8"
            },
            {
                "indexed": false,
                "name": "_new",
                "type": "uint8"
            }
        ],
        "name": "StateTranstition",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": true,
                "name": "addr",
                "type": "address"
            },
            {
                "indexed": false,
                "name": "guess",
                "type": "uint256"
            }
        ],
        "name": "newSubscriber",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": true,
                "name": "addr",
                "type": "address"
            },
            {
                "indexed": false,
                "name": "reward",
                "type": "uint256"
            }
        ],
        "name": "newWinner",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [],
        "name": "Pause",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [],
        "name": "Unpause",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": true,
                "name": "previousOwner",
                "type": "address"
            },
            {
                "indexed": true,
                "name": "newOwner",
                "type": "address"
            }
        ],
        "name": "OwnershipTransferred",
        "type": "event"
    }
];

App = {
    web3Provider: null,
    account: null,
    MatchInstance: null,
    MatchInstancePrice: null,

    CryptoInstance: null,
    CryptoInstancePrice: null,

    matches: {},
    currencyId: null,
    matchId: null,
    getAccount: function () {
        return new Promise((resolve, reject) => {
            web3.eth.getAccounts(function (error, accounts) {
                if (error) {
                    return reject(error);
                } else {
                    return resolve(accounts[0]);
                }
            });
        });
    },

    initWeb3: function () {
        return new Promise((resolve, reject) => {
            if (typeof web3 !== 'undefined') {
                App.web3Provider = web3.currentProvider;
            } else {
                App.web3Provider = new Web3.providers.HttpProvider('http://localhost:8545');
                alert("Please install Metamask before proceeding.");
                return;
            }
            web3 = new Web3(App.web3Provider);
            if (web3 == null || typeof web3 === 'undefined') {
                return reject("Something went wrong");
            } else {
                return resolve("Successfully connected to Web3 Provider.");
            }
        });
    },

    createMatchesBetContract: function () {
        let temp_match_id = App.matchId;
        let current_data = {};
        let match = App.matches[+App.matchId];
        let price = $("#subscription_price").val();
        let visibility_flag = $('#visibility_flag option:selected').val();
        let _league = match["league"];
        let _teamOne = match["homeTeam"]["name"];
        let _teamTwo = match["awayTeam"]["name"];
        let _matchTimestamp = Math.floor(new Date(match["utcDate"]).getTime() / 1000);
        let _executionDelay = _matchTimestamp + (3 * 60 * 60);
        let _price = +price * 1e18;
        console.log(+App.matchId, _league, _teamOne, _teamTwo, _matchTimestamp, _executionDelay, _price);
        var SolidSportBet = web3.eth.contract(SOLID_SPORT_BET_ABI);
        var SolidSportBetInstance = SolidSportBet.new(+App.matchId, _league, _teamOne, _teamTwo, _matchTimestamp, _executionDelay, _price, {
                from: App.account,
                value: 0.1 * 1e18,
                data: '0x60806040526000600655600a60075560405160e0806200283983398101604090815281516020830151918301516060840151608085015160a086015160c0909601519395929391929091662386f26fc100003410156200005e57600080fd5b60088790556009869055600a859055600b849055600c839055600d829055600e81905560058054600160a060020a03191673908e009ea04508db32933f463dec7d1d60aaa93f179055620000ba640100000000620000c7810204565b50505050505050620013a1565b60608060606200011b6040805190810160405280600381526020017f55524c0000000000000000000000000000000000000000000000000000000000815250620002e9640100000000026401000000009004565b3031116200018a57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600a60248201527f6e6f206170692066656500000000000000000000000000000000000000000000604482015290519081900360640190fd5b606060405190810160405280602281526020017f68747470733a2f2f6170692e6b72796b61732e6265742f76312f6d617463686581526020017f732f000000000000000000000000000000000000000000000000000000000000815250925062000205600854620005a4640100000000026401000000009004565b91506200028e6040805190810160405280600581526020017f6a736f6e2800000000000000000000000000000000000000000000000000000081525084846040805190810160405280600581526020017f292e726177000000000000000000000000000000000000000000000000000000815250620006bb640100000000026401000000009004565b9050620002e3600d546040805190810160405280600381526020017f55524c000000000000000000000000000000000000000000000000000000000081525083620006f1640100000000026401000000009004565b50505050565b60008054600160a060020a031615806200032057506000546200031e90600160a060020a031664010000000062000b45810204565b155b156200033d576200033b600064010000000062000b49810204565b505b6000809054906101000a9004600160a060020a0316600160a060020a03166338cc48316040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b158015620003a957600080fd5b505af1158015620003be573d6000803e3d6000fd5b505050506040513d6020811015620003d557600080fd5b5051600154600160a060020a03908116911614620004a7576000809054906101000a9004600160a060020a0316600160a060020a03166338cc48316040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b1580156200045957600080fd5b505af11580156200046e573d6000803e3d6000fd5b505050506040513d60208110156200048557600080fd5b505160018054600160a060020a031916600160a060020a039092169190911790555b6001546040517f524f3889000000000000000000000000000000000000000000000000000000008152602060048201818152855160248401528551600160a060020a039094169363524f388993879383926044909201919085019080838360005b838110156200052257818101518382015260200162000508565b50505050905090810190601f168015620005505780820380516001836020036101000a031916815260200191505b5092505050602060405180830381600087803b1580156200057057600080fd5b505af115801562000585573d6000803e3d6000fd5b505050506040513d60208110156200059c57600080fd5b505192915050565b60606000808281851515620005ef5760408051808201909152600181527f300000000000000000000000000000000000000000000000000000000000000060208201529450620006b2565b8593505b83156200060c57600190920191600a84049350620005f3565b826040519080825280601f01601f1916602001820160405280156200063b578160200160208202803883390190505b5091505060001982015b8515620006ae5781516000198201917f01000000000000000000000000000000000000000000000000000000000000006030600a8a0601029184919081106200068a57fe5b906020010190600160f860020a031916908160001a905350600a8604955062000645565b8194505b50505050919050565b6060620006e885620006d98681878764010000000062000b64810204565b64010000000062000b64810204565b95945050505050565b600080548190600160a060020a031615806200072a57506000546200072890600160a060020a031664010000000062000b45810204565b155b15620007475762000745600064010000000062000b49810204565b505b6000809054906101000a9004600160a060020a0316600160a060020a03166338cc48316040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b158015620007b357600080fd5b505af1158015620007c8573d6000803e3d6000fd5b505050506040513d6020811015620007df57600080fd5b5051600154600160a060020a03908116911614620008b1576000809054906101000a9004600160a060020a0316600160a060020a03166338cc48316040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b1580156200086357600080fd5b505af115801562000878573d6000803e3d6000fd5b505050506040513d60208110156200088f57600080fd5b505160018054600160a060020a031916600160a060020a039092169190911790555b6001546040517f524f3889000000000000000000000000000000000000000000000000000000008152602060048201818152875160248401528751600160a060020a039094169363524f388993899383926044909201919085019080838360005b838110156200092c57818101518382015260200162000912565b50505050905090810190601f1680156200095a5780820380516001836020036101000a031916815260200191505b5092505050602060405180830381600087803b1580156200097a57600080fd5b505af11580156200098f573d6000803e3d6000fd5b505050506040513d6020811015620009a657600080fd5b50519050670de0b6b3a764000062030d403a0201811115620009cc576000915062000b3d565b6001546040517fadf59f9900000000000000000000000000000000000000000000000000000000815260048101878152606060248301908152875160648401528751600160a060020a039094169363adf59f999386938b938b938b936044810191608490910190602087019080838360005b8381101562000a5857818101518382015260200162000a3e565b50505050905090810190601f16801562000a865780820380516001836020036101000a031916815260200191505b50838103825284518152845160209182019186019080838360005b8381101562000abb57818101518382015260200162000aa1565b50505050905090810190601f16801562000ae95780820380516001836020036101000a031916815260200191505b50955050505050506020604051808303818588803b15801562000b0b57600080fd5b505af115801562000b20573d6000803e3d6000fd5b50505050506040513d602081101562000b3857600080fd5b505191505b509392505050565b3b90565b600062000b5e64010000000062000bab810204565b92915050565b60408051602081810183526000808352835180830185528181528451928301909452815260609262000ba492869286929064010000000062000f58810204565b9392505050565b60008062000bd6731d3b2638a7cc9f2cb3d298a3da7a90b67e5506ed64010000000062000b45810204565b111562000c545760008054600160a060020a031916731d3b2638a7cc9f2cb3d298a3da7a90b67e5506ed17905560408051808201909152600b81527f6574685f6d61696e6e6574000000000000000000000000000000000000000000602082015262000c4b90640100000000620012e6810204565b50600162000f55565b600062000c7e73c03a2615d5efaf5f49f60b7bb6583eaec212fdf164010000000062000b45810204565b111562000cf35760008054600160a060020a03191673c03a2615d5efaf5f49f60b7bb6583eaec212fdf117905560408051808201909152600c81527f6574685f726f707374656e330000000000000000000000000000000000000000602082015262000c4b90640100000000620012e6810204565b600062000d1d73b7a07bcf2ba2f2703b24c0691b5278999c59ac7e64010000000062000b45810204565b111562000d925760008054600160a060020a03191673b7a07bcf2ba2f2703b24c0691b5278999c59ac7e17905560408051808201909152600981527f6574685f6b6f76616e0000000000000000000000000000000000000000000000602082015262000c4b90640100000000620012e6810204565b600062000dbc73146500cfd35b22e4a392fe0adc06de1a1368ed4864010000000062000b45810204565b111562000e315760008054600160a060020a03191673146500cfd35b22e4a392fe0adc06de1a1368ed4817905560408051808201909152600b81527f6574685f72696e6b656279000000000000000000000000000000000000000000602082015262000c4b90640100000000620012e6810204565b600062000e5b736f485c8bf6fc43ea212e93bbf8ce046c7f1cb47564010000000062000b45810204565b111562000e91575060008054600160a060020a031916736f485c8bf6fc43ea212e93bbf8ce046c7f1cb475179055600162000f55565b600062000ebb7320e12a1f859b3feae5fb2a0a32c18f5a65555bbf64010000000062000b45810204565b111562000ef1575060008054600160a060020a0319167320e12a1f859b3feae5fb2a0a32c18f5a65555bbf179055600162000f55565b600062000f1b7351efaf4c8b3c9afbd5ab9f4bbc82784ab6ef8faa64010000000062000b45810204565b111562000f51575060008054600160a060020a0319167351efaf4c8b3c9afbd5ab9f4bbc82784ab6ef8faa179055600162000f55565b5060005b90565b6060806060806060806060806000808e98508d97508c96508b95508a94508451865188518a518c51010101016040519080825280601f01601f19166020018201604052801562000fb2578160200160208202803883390190505b50935083925060009150600090505b88518110156200105b57888181518110151562000fda57fe5b9060200101517f010000000000000000000000000000000000000000000000000000000000000090047f01000000000000000000000000000000000000000000000000000000000000000283838060010194508151811015156200103a57fe5b906020010190600160f860020a031916908160001a90535060010162000fc1565b5060005b8751811015620010f95787818151811015156200107857fe5b9060200101517f010000000000000000000000000000000000000000000000000000000000000090047f0100000000000000000000000000000000000000000000000000000000000000028383806001019450815181101515620010d857fe5b906020010190600160f860020a031916908160001a9053506001016200105f565b5060005b8651811015620011975786818151811015156200111657fe5b9060200101517f010000000000000000000000000000000000000000000000000000000000000090047f01000000000000000000000000000000000000000000000000000000000000000283838060010194508151811015156200117657fe5b906020010190600160f860020a031916908160001a905350600101620010fd565b5060005b855181101562001235578581815181101515620011b457fe5b9060200101517f010000000000000000000000000000000000000000000000000000000000000090047f01000000000000000000000000000000000000000000000000000000000000000283838060010194508151811015156200121457fe5b906020010190600160f860020a031916908160001a9053506001016200119b565b5060005b8451811015620012d35784818151811015156200125257fe5b9060200101517f010000000000000000000000000000000000000000000000000000000000000090047f0100000000000000000000000000000000000000000000000000000000000000028383806001019450815181101515620012b257fe5b906020010190600160f860020a031916908160001a90535060010162001239565b50909d9c50505050505050505050505050565b8051620012fb906002906020840190620012ff565b5050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200134257805160ff191683800117855562001372565b8280016001018555821562001372579182015b828111156200137257825182559160200191906001019062001355565b506200138092915062001384565b5090565b62000f5591905b808211156200138057600081556001016200138b565b61148880620013b16000396000f30060806040526004361061005e5763ffffffff60e060020a60003504166327dc297e811461006357806338bbfa50146100c35780634fb2e45d1461015f578063565974d31461018057806384370813146101d6578063df7bf704146101e4575b600080fd5b34801561006f57600080fd5b5060408051602060046024803582810135601f81018590048502860185019096528585526100c19583359536956044949193909101919081908401838280828437509497506102129650505050505050565b005b3480156100cf57600080fd5b5060408051602060046024803582810135601f81018590048502860185019096528585526100c195833595369560449491939091019190819084018382808284375050604080516020601f89358b018035918201839004830284018301909452808352979a99988101979196509182019450925082915084018382808284375094975061037d9650505050505050565b34801561016b57600080fd5b506100c1600160a060020a0360043516610382565b34801561018c57600080fd5b506101956103bb565b604080519889526020890197909752878701959095526060870193909352608086019190915260a085015260c084015260e083015251908190036101000190f35b6100c16004356024356103dd565b3480156101f057600080fd5b506101f9610513565b6040805192835260208301919091528051918290030190f35b61021a61051d565b600160a060020a031633600160a060020a031614806102435750600554600160a060020a031633145b801561024f5750600654155b15156102bc57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601760248201527f496e76616c6964204f7261636c652043616c6c6261636b000000000000000000604482015290519081900360640190fd5b7fb749f9f34ea0f118080413f464339dbd20e14dc877db555d47b85ff4f418d649816040518080602001828103825283818151815260200191508051906020019080838360005b8381101561031b578181015183820152602001610303565b50505050905090810190601f1680156103485780820380516001836020036101000a031916815260200191505b509250505060405180910390a180516103689060149060208401906113a3565b5061037161070f565b610379610b15565b5050565b505050565b600554600160a060020a0316331461039957600080fd5b60058054600160a060020a031916600160a060020a0392909216919091179055565b600854600954600a54600b54600c54600d54600e546006549091929394959697565b32331480156103ee5750600e543410155b80156103fc57506103e88211155b801561040a57506103e88111155b151561041557600080fd5b60408051606081018252338082526020808301868152838501868152600f805460018101825560009190915294517f8d1108e10bcb7c27dddfc02ed9d693a074039d026cf4ea4240b40f7d581ac80260039096029586018054600160a060020a031916600160a060020a0390921691909117905590517f8d1108e10bcb7c27dddfc02ed9d693a074039d026cf4ea4240b40f7d581ac803850155517f8d1108e10bcb7c27dddfc02ed9d693a074039d026cf4ea4240b40f7d581ac804909301929092558251858152918201849052825190927fd9fd7ff1b2e807f687c0bbd788ba5362d0e7c7bdcdbea264adf9457c9e2b35ec928290030190a25050565b6011546012549091565b60008054600160a060020a03161580610548575060005461054690600160a060020a0316610c47565b155b15610559576105576000610c4b565b505b6000809054906101000a9004600160a060020a0316600160a060020a03166338cc48316040518163ffffffff1660e060020a028152600401602060405180830381600087803b1580156105ab57600080fd5b505af11580156105bf573d6000803e3d6000fd5b505050506040513d60208110156105d557600080fd5b5051600154600160a060020a0390811691161461068a576000809054906101000a9004600160a060020a0316600160a060020a03166338cc48316040518163ffffffff1660e060020a028152600401602060405180830381600087803b15801561063e57600080fd5b505af1158015610652573d6000803e3d6000fd5b505050506040513d602081101561066857600080fd5b505160018054600160a060020a031916600160a060020a039092169190911790555b600160009054906101000a9004600160a060020a0316600160a060020a031663c281d19e6040518163ffffffff1660e060020a028152600401602060405180830381600087803b1580156106dd57600080fd5b505af11580156106f1573d6000803e3d6000fd5b505050506040513d602081101561070757600080fd5b505190505b90565b60148054604080516020601f60026000196101006001881615020190951694909404938401819004810282018101909252828152600093849384938493849384936107e5938301828280156107a55780601f1061077a576101008083540402835291602001916107a5565b820191906000526020600020905b81548152906001019060200180831161078857829003601f168201915b50505050506040805190810160405280600181526020017f3000000000000000000000000000000000000000000000000000000000000000815250610c5b565b156107ef57610b0d565b60148054604080516020601f60026000196101006001881615020190951694909404938401819004810282018101909252828152610888939092909183018282801561087c5780601f106108515761010080835404028352916020019161087c565b820191906000526020600020905b81548152906001019060200180831161085f57829003601f168201915b50505050506000610dfa565b9550620f423f86111561089a57610b0d565b5050600160065560408051606081018252338082526103e88088046020840181905290810288039290930182905260108054600160a060020a03191690911790556011829055601281905590935091506402540be40060005b600f54811015610ad15760408051606081018252601054600160a060020a03168152601154602082015260125491810191909152600f80546109839291908490811061093b57fe5b60009182526020918290206040805160608101825260039093029091018054600160a060020a0316835260018101549383019390935260029092015491810191909152610fb4565b15610ac957610a00600f8281548110151561099a57fe5b6000918252602091829020604080516060818101835260039094029092018054600160a060020a03908116845260018201548487015260029091015483830152815193840182526010541683526011549383019390935260125492820192909252611023565b925081831015610a6f57829150610a1960136000611421565b6013600f82815481101515610a2a57fe5b60009182526020808320600390920290910154835460018101855593835291209091018054600160a060020a031916600160a060020a03909216919091179055610ac9565b81831415610ac9576013600f82815481101515610a8857fe5b60009182526020808320600390920290910154835460018101855593835291209091018054600160a060020a031916600160a060020a039092169190911790555b6001016108f3565b604080518681526020810186905281517ffce25d0084d4e4c40132a93c5b5630453901e52fb4e21103e4c07802e8a36ada929181900390910190a15b505050505050565b60075460135460649190910390303190600090811015610c0357601354606402828402811515610b4157fe5b049250600090505b601354811015610c03576013805482908110610b6157fe5b6000918252602082200154604051600160a060020a039091169185156108fc02918691818181858888f19350505050158015610ba1573d6000803e3d6000fd5b506013805482908110610bb057fe5b60009182526020918290200154604080518681529051600160a060020a03909216927fe996987d056eca0e2ed60cc6fd77731e38c3a90676a4b93a436854cabbdac12f92918290030190a2600101610b49565b60055460405130319350600160a060020a03909116906108fc8415029084906000818181858888f19350505050158015610c41573d6000803e3d6000fd5b50505050565b3b90565b6000610c55611051565b92915050565b8051825160009114610c6f57506000610c55565b816040516020018082805190602001908083835b60208310610ca25780518252601f199092019160209182019101610c83565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040516020818303038152906040526040518082805190602001908083835b60208310610d055780518252601f199092019160209182019101610ce6565b51815160209384036101000a60001901801990921691161790526040519190930181900381208851909550889450908301928392508401908083835b60208310610d605780518252601f199092019160209182019101610d41565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040516020818303038152906040526040518082805190602001908083835b60208310610dc35780518252601f199092019160209182019101610da4565b5181516020939093036101000a60001901801990911692169190911790526040519201829003909120939093149695505050505050565b6000828180805b8351811015610f975783517f300000000000000000000000000000000000000000000000000000000000000090859083908110610e3a57fe5b90602001015160f860020a900460f860020a027effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff191610158015610ee0575083517f390000000000000000000000000000000000000000000000000000000000000090859083908110610ea857fe5b90602001015160f860020a900460f860020a027effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff191611155b15610f39578115610eff57851515610ef757610f97565b600019909501945b600a8302925060308482815181101515610f1557fe5b90602001015160f860020a900460f860020a0260f860020a90040383019250610f8f565b8381815181101515610f4757fe5b90602001015160f860020a900460f860020a027effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916602e60f860020a021415610f8f57600191505b600101610e01565b6000861115610fa95785600a0a830292505b509095945050505050565b600082604001518360200151118015610fd4575081604001518260200151115b80610ff8575082604001518360200151108015610ff8575081604001518260200151105b8061101c57508260400151836020015114801561101c575081604001518260200151145b9392505050565b600061103783604001518360400151611379565b61104984602001518460200151611379565b019392505050565b600080611071731d3b2638a7cc9f2cb3d298a3da7a90b67e5506ed610c47565b11156110e25760008054600160a060020a031916731d3b2638a7cc9f2cb3d298a3da7a90b67e5506ed17905560408051808201909152600b81527f6574685f6d61696e6e657400000000000000000000000000000000000000000060208201526110da90611394565b50600161070c565b600061110173c03a2615d5efaf5f49f60b7bb6583eaec212fdf1610c47565b111561116a5760008054600160a060020a03191673c03a2615d5efaf5f49f60b7bb6583eaec212fdf117905560408051808201909152600c81527f6574685f726f707374656e33000000000000000000000000000000000000000060208201526110da90611394565b600061118973b7a07bcf2ba2f2703b24c0691b5278999c59ac7e610c47565b11156111f25760008054600160a060020a03191673b7a07bcf2ba2f2703b24c0691b5278999c59ac7e17905560408051808201909152600981527f6574685f6b6f76616e000000000000000000000000000000000000000000000060208201526110da90611394565b600061121173146500cfd35b22e4a392fe0adc06de1a1368ed48610c47565b111561127a5760008054600160a060020a03191673146500cfd35b22e4a392fe0adc06de1a1368ed4817905560408051808201909152600b81527f6574685f72696e6b65627900000000000000000000000000000000000000000060208201526110da90611394565b6000611299736f485c8bf6fc43ea212e93bbf8ce046c7f1cb475610c47565b11156112cd575060008054600160a060020a031916736f485c8bf6fc43ea212e93bbf8ce046c7f1cb475179055600161070c565b60006112ec7320e12a1f859b3feae5fb2a0a32c18f5a65555bbf610c47565b1115611320575060008054600160a060020a0319167320e12a1f859b3feae5fb2a0a32c18f5a65555bbf179055600161070c565b600061133f7351efaf4c8b3c9afbd5ab9f4bbc82784ab6ef8faa610c47565b1115611373575060008054600160a060020a0319167351efaf4c8b3c9afbd5ab9f4bbc82784ab6ef8faa179055600161070c565b50600090565b600081831161138c57828203800261101c565b509003800290565b80516103799060029060208401905b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106113e457805160ff1916838001178555611411565b82800160010185558215611411579182015b828111156114115782518255916020019190600101906113f6565b5061141d929150611442565b5090565b508054600082559060005260206000209081019061143f9190611442565b50565b61070c91905b8082111561141d57600081556001016114485600a165627a7a7230582023e972c7b33cd4a9db955d90ccc3b7ca2c9e80680cfd8c8381cf7c28a7d792a60029',
                gas: '4700000'
            },

            function (err, deployedContract) {
                if (!err) {
                    if (!deployedContract.address) {
                        console.log(deployedContract["transactionHash"]);
                        $('#addMatchModal').modal('hide');
                        $('#solidBetTransactionModal').modal({
                            keyboard: false,
                            show: true
                        });

                        $.ajax({
                            method: 'POST',
                            contentType: 'application/json',
                            url: '/v1/contracts/add',
                            data: JSON.stringify({
                                account: App.account,
                                type: +visibility_flag,
                                uuid: +App.matchId,
                                category: 'sports',
                                transactionHash: deployedContract["transactionHash"],
                                execution_time: Math.floor(new Date(match["utcDate"]).getTime() / 1000),
                                subscription_price: _price
                            }),
                            success: function (data, textStatus, jqXHR) {
                                current_data = data;
                                if (data['success']) {
                                    let content = "";
                                    let link = `https://ropsten.etherscan.io/tx/${deployedContract["transactionHash"]}`;
                                    content += `Track your transaction by clicking <a href="${link}" target="_blank">here</a>`;
                                    $("#solidBetTransactionModalBody").html(content);
                                }
                            },
                            error: function (jqXHR, textStatus, errorThrown) {
                                console.log('Failed to post data.');
                            }
                        });

                    } else {
                        if (current_data['success']) {
                            $('#addTickerModal').modal('hide');
                            $('#solidBetTransactionModal').modal({
                                keyboard: false,
                                show: true
                            });
                            console.log(deployedContract.address);
                            let deployed_contract_content = "";
                            let link = `https://ropsten.etherscan.io/address/${deployedContract["address"]}`;
                            let local_link = `./contracts/${+temp_match_id}/${current_data['result'][0]}`;
                            deployed_contract_content += `Successfully created and deployed contract for match: ${+temp_match_id}.<br/>`;
                            deployed_contract_content += `Check your contract on the ropsten network <a href="${link}" target="_blank">here</a><br/>`;
                            deployed_contract_content += `Check your deployed contract bet by clicking <a href="${local_link}" target="_blank">here</a><br/>`;
                            $("#solidBetTransactionModalBody").html(deployed_contract_content);
                        }
                    }
                } else {
                    console.log(err);
                }
            });
    },

    createCryptoBetContract: function () {
        let current_data = {};
        var _creator = App.account;
        var _currency = App.currencyId;
        let __closure_delay = $("#closure_delay").val();
        let __execution_delay = $("#execution_delay").val();
        let visibility_flag = $('#visibility_flag option:selected').val();
        let _closureDelay = new Date(__closure_delay).getTime() / 1000;
        let _executionDelay = new Date(__execution_delay).getTime() / 1000;
        var _subscriptionPrice = $("#subscription_price").val() * 1e18;
        var cryptopricebetContract = web3.eth.contract(SOLID_CRYPTO_BET_ABI);
        var cryptopricebet = cryptopricebetContract.new(
            _creator,
            _currency,
            _closureDelay,
            _executionDelay,
            _subscriptionPrice,
            {
                from: App.account,
                value: 0.1 * 1e18,
                data: '0x608060408190526005805460a060020a61ffff0219169055600a805460ff1916905560a080620032ed8339810160409081528151602083015191830151606084015160809094015160058054600160a060020a0319163317905591939091818310620000cc57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600e60248201527f496e76616c69642054696d696e67000000000000000000000000000000000000604482015290519081900360640190fd5b6005805433600160a060020a03199182161790915560128054909116600160a060020a03871617905560068490556007839055600882905560098190556200011c64010000000062000127810204565b505050505062000dda565b60408051808201909152600381527f55524c000000000000000000000000000000000000000000000000000000000060208201526200016f9064010000000062000244810204565b303111620001de57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600760248201527f4e6f204247617a00000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b620002416007546040805190810160405280600381526020017f55524c00000000000000000000000000000000000000000000000000000000008152506020604051908101604052806000815250620004ff640100000000026401000000009004565b50565b60008054600160a060020a031615806200027b57506000546200027990600160a060020a031664010000000062000953810204565b155b15620002985762000296600064010000000062000957810204565b505b6000809054906101000a9004600160a060020a0316600160a060020a03166338cc48316040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b1580156200030457600080fd5b505af115801562000319573d6000803e3d6000fd5b505050506040513d60208110156200033057600080fd5b5051600154600160a060020a0390811691161462000402576000809054906101000a9004600160a060020a0316600160a060020a03166338cc48316040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b158015620003b457600080fd5b505af1158015620003c9573d6000803e3d6000fd5b505050506040513d6020811015620003e057600080fd5b505160018054600160a060020a031916600160a060020a039092169190911790555b6001546040517f524f3889000000000000000000000000000000000000000000000000000000008152602060048201818152855160248401528551600160a060020a039094169363524f388993879383926044909201919085019080838360005b838110156200047d57818101518382015260200162000463565b50505050905090810190601f168015620004ab5780820380516001836020036101000a031916815260200191505b5092505050602060405180830381600087803b158015620004cb57600080fd5b505af1158015620004e0573d6000803e3d6000fd5b505050506040513d6020811015620004f757600080fd5b505192915050565b600080548190600160a060020a031615806200053857506000546200053690600160a060020a031664010000000062000953810204565b155b15620005555762000553600064010000000062000957810204565b505b6000809054906101000a9004600160a060020a0316600160a060020a03166338cc48316040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b158015620005c157600080fd5b505af1158015620005d6573d6000803e3d6000fd5b505050506040513d6020811015620005ed57600080fd5b5051600154600160a060020a03908116911614620006bf576000809054906101000a9004600160a060020a0316600160a060020a03166338cc48316040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b1580156200067157600080fd5b505af115801562000686573d6000803e3d6000fd5b505050506040513d60208110156200069d57600080fd5b505160018054600160a060020a031916600160a060020a039092169190911790555b6001546040517f524f3889000000000000000000000000000000000000000000000000000000008152602060048201818152875160248401528751600160a060020a039094169363524f388993899383926044909201919085019080838360005b838110156200073a57818101518382015260200162000720565b50505050905090810190601f168015620007685780820380516001836020036101000a031916815260200191505b5092505050602060405180830381600087803b1580156200078857600080fd5b505af11580156200079d573d6000803e3d6000fd5b505050506040513d6020811015620007b457600080fd5b50519050670de0b6b3a764000062030d403a0201811115620007da57600091506200094b565b6001546040517fadf59f9900000000000000000000000000000000000000000000000000000000815260048101878152606060248301908152875160648401528751600160a060020a039094169363adf59f999386938b938b938b936044810191608490910190602087019080838360005b83811015620008665781810151838201526020016200084c565b50505050905090810190601f168015620008945780820380516001836020036101000a031916815260200191505b50838103825284518152845160209182019186019080838360005b83811015620008c9578181015183820152602001620008af565b50505050905090810190601f168015620008f75780820380516001836020036101000a031916815260200191505b50955050505050506020604051808303818588803b1580156200091957600080fd5b505af11580156200092e573d6000803e3d6000fd5b50505050506040513d60208110156200094657600080fd5b505191505b509392505050565b3b90565b60006200096c64010000000062000972810204565b92915050565b6000806200099d731d3b2638a7cc9f2cb3d298a3da7a90b67e5506ed64010000000062000953810204565b111562000a1b5760008054600160a060020a031916731d3b2638a7cc9f2cb3d298a3da7a90b67e5506ed17905560408051808201909152600b81527f6574685f6d61696e6e6574000000000000000000000000000000000000000000602082015262000a129064010000000062000d1f810204565b50600162000d1c565b600062000a4573c03a2615d5efaf5f49f60b7bb6583eaec212fdf164010000000062000953810204565b111562000aba5760008054600160a060020a03191673c03a2615d5efaf5f49f60b7bb6583eaec212fdf117905560408051808201909152600c81527f6574685f726f707374656e330000000000000000000000000000000000000000602082015262000a129064010000000062000d1f810204565b600062000ae473b7a07bcf2ba2f2703b24c0691b5278999c59ac7e64010000000062000953810204565b111562000b595760008054600160a060020a03191673b7a07bcf2ba2f2703b24c0691b5278999c59ac7e17905560408051808201909152600981527f6574685f6b6f76616e0000000000000000000000000000000000000000000000602082015262000a129064010000000062000d1f810204565b600062000b8373146500cfd35b22e4a392fe0adc06de1a1368ed4864010000000062000953810204565b111562000bf85760008054600160a060020a03191673146500cfd35b22e4a392fe0adc06de1a1368ed4817905560408051808201909152600b81527f6574685f72696e6b656279000000000000000000000000000000000000000000602082015262000a129064010000000062000d1f810204565b600062000c22736f485c8bf6fc43ea212e93bbf8ce046c7f1cb47564010000000062000953810204565b111562000c58575060008054600160a060020a031916736f485c8bf6fc43ea212e93bbf8ce046c7f1cb475179055600162000d1c565b600062000c827320e12a1f859b3feae5fb2a0a32c18f5a65555bbf64010000000062000953810204565b111562000cb8575060008054600160a060020a0319167320e12a1f859b3feae5fb2a0a32c18f5a65555bbf179055600162000d1c565b600062000ce27351efaf4c8b3c9afbd5ab9f4bbc82784ab6ef8faa64010000000062000953810204565b111562000d18575060008054600160a060020a0319167351efaf4c8b3c9afbd5ab9f4bbc82784ab6ef8faa179055600162000d1c565b5060005b90565b805162000d3490600290602084019062000d38565b5050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1062000d7b57805160ff191683800117855562000dab565b8280016001018555821562000dab579182015b8281111562000dab57825182559160200191906001019062000d8e565b5062000db992915062000dbd565b5090565b62000d1c91905b8082111562000db9576000815560010162000dc4565b6125038062000dea6000396000f30060806040526004361061010e5763ffffffff60e060020a6000350416630f574ba78114610113578063200d2ed21461013057806327dc297e1461016957806338bbfa50146101c95780633f4ba83a1461026557806348c4a7ef1461027a5780634ef9b89c1461028f5780635797100d146102b057806359221a68146102c55780635c975abb146102f957806361bc221a1461032257806365372147146103375780638456cb59146103c15780638b257989146103d65780638da5cb5b146103eb5780639ead8f9d14610400578063a2fb117514610415578063bdc8e54c1461042d578063e3ae85f014610442578063e5a6b10f14610457578063efbe1c1c1461046c578063f2fde38b14610481575b600080fd5b61011e6004356104a2565b60408051918252519081900360200190f35b34801561013c57600080fd5b50610145610617565b6040518082600381111561015557fe5b60ff16815260200191505060405180910390f35b34801561017557600080fd5b5060408051602060046024803582810135601f81018590048502860185019096528585526101c79583359536956044949193909101919081908401838280828437509497506106209650505050505050565b005b3480156101d557600080fd5b5060408051602060046024803582810135601f81018590048502860185019096528585526101c795833595369560449491939091019190819084018382808284375050604080516020601f89358b018035918201839004830284018301909452808352979a9998810197919650918201945092508291508401838280828437509497506106d39650505050505050565b34801561027157600080fd5b506101c76106d8565b34801561028657600080fd5b5061011e61079a565b34801561029b57600080fd5b5061011e600160a060020a03600435166107a0565b3480156102bc57600080fd5b506101c76107b2565b3480156102d157600080fd5b506102dd600435610961565b60408051600160a060020a039092168252519081900360200190f35b34801561030557600080fd5b5061030e610989565b604080519115158252519081900360200190f35b34801561032e57600080fd5b5061011e6109aa565b34801561034357600080fd5b5061034c6109b0565b6040805160208082528351818301528351919283929083019185019080838360005b8381101561038657818101518382015260200161036e565b50505050905090810190601f1680156103b35780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b3480156103cd57600080fd5b506101c7610a47565b3480156103e257600080fd5b5061011e610b1f565b3480156103f757600080fd5b506102dd610b25565b34801561040c57600080fd5b5061011e610b34565b34801561042157600080fd5b506102dd600435610b3a565b34801561043957600080fd5b5061011e610b48565b34801561044e57600080fd5b5061011e610b4e565b34801561046357600080fd5b5061011e610b54565b34801561047857600080fd5b506101c7610b5a565b34801561048d57600080fd5b506101c7600160a060020a0360043516610bb8565b6005546000907501000000000000000000000000000000000000000000900460ff16156104ce57600080fd5b6005805475ff00000000000000000000000000000000000000000019167501000000000000000000000000000000000000000000179055323314801561052457506000600a5460ff16600381111561052257fe5b145b801561053d5750336000908152600c6020526040902054155b80156105495750600082115b801561055757506009543410155b151561056257600080fd5b600b8054600181019091557f0175b7a638427703f0dbe7bb9bbf987a2551717b34e79f33b5b1008d1fa01db9018054600160a060020a031916339081179091556000818152600c6020908152604091829020859055815185815291517f9e30c3511470799100eca17de5157a6dcc306189b2380a3156e4e0ba8f0f56249281900390910190a2505060108054600101908190556005805475ff0000000000000000000000000000000000000000001916905590565b600a5460ff1681565b610628610c79565b600160a060020a03163314610687576040805160e560020a62461bcd02815260206004820152601760248201527f496e76616c6964204f7261636c652043616c6c6261636b000000000000000000604482015290519081900360640190fd5b6000600a5460ff16600381111561069a57fe5b14156106ad576106a8610e6a565b6106cf565b6001600a5460ff1660038111156106c057fe5b14156106cf576106cf8161105c565b5050565b505050565b600554600160a060020a03163314610728576040805160e560020a62461bcd02815260206004820152600c60248201526000805160206124b8833981519152604482015290519081900360640190fd5b60055474010000000000000000000000000000000000000000900460ff16151561075157600080fd5b6005805474ff0000000000000000000000000000000000000000191690556040517f7805862f689e2f13df9f062ff482ad3ad112aca9e0847911ed832e158c525b3390600090a1565b60075481565b600c6020526000908152604090205481565b6005546000907501000000000000000000000000000000000000000000900460ff16156107de57600080fd5b6005805475ff00000000000000000000000000000000000000000019167501000000000000000000000000000000000000000000179081905533600160a060020a0390911614610866576040805160e560020a62461bcd02815260206004820152600c60248201526000805160206124b8833981519152604482015290519081900360640190fd5b6003600a5460ff16600381111561087957fe5b146108ce576040805160e560020a62461bcd02815260206004820152600e60248201527f4e6f74204170706c696361626c65000000000000000000000000000000000000604482015290519081900360640190fd5b600a546040516000805160206124988339815191529160ff1690600190808360038111156108f857fe5b60ff16815260200182600381111561090c57fe5b60ff1681526020019250505060405180910390a150600a805460ff191660011781556008805491905561093d610e6a565b6008556005805475ff00000000000000000000000000000000000000000019169055565b600b80548290811061096f57fe5b600091825260209091200154600160a060020a0316905081565b60055474010000000000000000000000000000000000000000900460ff1681565b60105481565b60118054604080516020601f6002600019610100600188161502019095169490940493840181900481028201810190925282815260609390929091830182828015610a3c5780601f10610a1157610100808354040283529160200191610a3c565b820191906000526020600020905b815481529060010190602001808311610a1f57829003601f168201915b505050505090505b90565b600554600160a060020a03163314610a97576040805160e560020a62461bcd02815260206004820152600c60248201526000805160206124b8833981519152604482015290519081900360640190fd5b60055474010000000000000000000000000000000000000000900460ff1615610abf57600080fd5b6005805474ff00000000000000000000000000000000000000001916740100000000000000000000000000000000000000001790556040517f6985a02210a168e66602d3235cb6db0e70f92b3ba4d376a33c0f3d9434bff62590600090a1565b60085481565b600554600160a060020a031681565b600e5481565b600d80548290811061096f57fe5b60095481565b600f5481565b60065481565b600554600160a060020a03163314610baa576040805160e560020a62461bcd02815260206004820152600c60248201526000805160206124b8833981519152604482015290519081900360640190fd5b600554600160a060020a0316ff5b600554600160a060020a03163314610c08576040805160e560020a62461bcd02815260206004820152600c60248201526000805160206124b8833981519152604482015290519081900360640190fd5b600160a060020a0381161515610c1d57600080fd5b600554604051600160a060020a038084169216907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a360058054600160a060020a031916600160a060020a0392909216919091179055565b60008054600160a060020a03161580610ca45750600054610ca290600160a060020a0316611545565b155b15610cb557610cb36000611549565b505b6000809054906101000a9004600160a060020a0316600160a060020a03166338cc48316040518163ffffffff1660e060020a028152600401602060405180830381600087803b158015610d0757600080fd5b505af1158015610d1b573d6000803e3d6000fd5b505050506040513d6020811015610d3157600080fd5b5051600154600160a060020a03908116911614610de6576000809054906101000a9004600160a060020a0316600160a060020a03166338cc48316040518163ffffffff1660e060020a028152600401602060405180830381600087803b158015610d9a57600080fd5b505af1158015610dae573d6000803e3d6000fd5b505050506040513d6020811015610dc457600080fd5b505160018054600160a060020a031916600160a060020a039092169190911790555b600160009054906101000a9004600160a060020a0316600160a060020a031663c281d19e6040518163ffffffff1660e060020a028152600401602060405180830381600087803b158015610e3957600080fd5b505af1158015610e4d573d6000803e3d6000fd5b505050506040513d6020811015610e6357600080fd5b5051905090565b600a5460405160609182916000805160206124988339815191529160ff169060019080836003811115610e9957fe5b60ff168152602001826003811115610ead57fe5b60ff1681526020019250505060405180910390a1600a805460ff1916600117905560408051808201909152600381527f55524c00000000000000000000000000000000000000000000000000000000006020820152610f0b90611559565b303111610f62576040805160e560020a62461bcd02815260206004820152600760248201527f4e6f204247617a00000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b606060405190810160405280602d81526020017f6a736f6e2868747470733a2f2f6170692e636f696e6d61726b65746361702e6381526020017f6f6d2f76322f7469636b65722f000000000000000000000000000000000000008152509150611008610fcf6006546117bd565b60408051808201909152601881527f2f292e646174612e71756f7465732e5553442e7072696365000000000000000060208201526118b0565b905061101482826118b0565b91506106d3600754600854036040805190810160405280600381526020017f55524c0000000000000000000000000000000000000000000000000000000000815250846118ec565b60008080808060608180808080806001600a5460ff16600381111561107d57fe5b148061109957506003600a5460ff16600381111561109757fe5b145b15156110ef576040805160e560020a62461bcd02815260206004820152600e60248201527f496e76616c696420537461747573000000000000000000000000000000000000604482015290519081900360640190fd5b8c601190805190602001906111059291906123ff565b506111118d6006611cde565b600b54604080518281526020808402820101909152919c50600099508015611143578160200160208202803883390190505b50965060008b11156114d75760009b505b600b548c10156112b05761119f600c6000600b8f81548110151561117457fe5b6000918252602080832090910154600160a060020a031683528201929092526040019020548c611e50565b99508b15156111af578960010198505b888a101561124a57600b8054600099508d9081106111c957fe5b6000918252602090912001548751600160a060020a039091169088908a9081106111ef57fe5b600160a060020a03909216602092830290910190910152600b80548b9a50600c916000918f90811061121d57fe5b6000918252602080832090910154600160a060020a03168352820192909252604001902054600e556112a5565b888a14156112a557600b80548d90811061126057fe5b600091825260209091200154875160019990990198600160a060020a039091169088908a90811061128d57fe5b600160a060020a039092166020928302909101909101525b6001909b019a611154565b60105460095402955060646046870204945087600101858115156112d057fe5b04935084860392506064604684026005546040519290910493503031889003848603019250600160a060020a03169082156108fc029083906000818181858888f19350505050158015611327573d6000803e3d6000fd5b50601254604051600160a060020a039091169083156108fc029084906000818181858888f19350505050158015611362573d6000803e3d6000fd5b5060009b505b878c1161146e57600d878d81518110151561137f57fe5b6020908102919091018101518254600181018455600093845291909220018054600160a060020a031916600160a060020a03909216919091179055865187908d9081106113c857fe5b90602001906020020151600160a060020a03166108fc859081150290604051600060405180830381858888f1935050505015801561140a573d6000803e3d6000fd5b50868c81518110151561141957fe5b90602001906020020151600160a060020a03167fe996987d056eca0e2ed60cc6fd77731e38c3a90676a4b93a436854cabbdac12f856040518082815260200191505060405180910390a26001909b019a611368565b600f849055600a546040516000805160206124988339815191529160ff16906002908083600381111561149d57fe5b60ff1681526020018260038111156114b157fe5b60ff1681526020019250505060405180910390a1600a805460ff19166002179055611536565b600a546040516000805160206124988339815191529160ff169060039080838381111561150057fe5b60ff16815260200182600381111561151457fe5b60ff1681526020019250505060405180910390a1600a805460ff191660031790555b50505050505050505050505050565b3b90565b6000611553611e67565b92915050565b60008054600160a060020a03161580611584575060005461158290600160a060020a0316611545565b155b15611595576115936000611549565b505b6000809054906101000a9004600160a060020a0316600160a060020a03166338cc48316040518163ffffffff1660e060020a028152600401602060405180830381600087803b1580156115e757600080fd5b505af11580156115fb573d6000803e3d6000fd5b505050506040513d602081101561161157600080fd5b5051600154600160a060020a039081169116146116c6576000809054906101000a9004600160a060020a0316600160a060020a03166338cc48316040518163ffffffff1660e060020a028152600401602060405180830381600087803b15801561167a57600080fd5b505af115801561168e573d6000803e3d6000fd5b505050506040513d60208110156116a457600080fd5b505160018054600160a060020a031916600160a060020a039092169190911790555b6001546040517f524f3889000000000000000000000000000000000000000000000000000000008152602060048201818152855160248401528551600160a060020a039094169363524f388993879383926044909201919085019080838360005b8381101561173f578181015183820152602001611727565b50505050905090810190601f16801561176c5780820380516001836020036101000a031916815260200191505b5092505050602060405180830381600087803b15801561178b57600080fd5b505af115801561179f573d6000803e3d6000fd5b505050506040513d60208110156117b557600080fd5b505192915050565b606060008082818515156118065760408051808201909152600181527f3000000000000000000000000000000000000000000000000000000000000000602082015294506118a7565b8593505b831561182157600190920191600a8404935061180a565b826040519080825280601f01601f19166020018201604052801561184f578160200160208202803883390190505b5091505060001982015b85156118a357815160001982019160f860020a6030600a8a06010291849190811061188057fe5b906020010190600160f860020a031916908160001a905350600a86049550611859565b8194505b50505050919050565b6040805160208181018352600080835283518083018552818152845192830190945281526060926118e592869286929061218f565b9392505050565b600080548190600160a060020a03161580611919575060005461191790600160a060020a0316611545565b155b1561192a576119286000611549565b505b6000809054906101000a9004600160a060020a0316600160a060020a03166338cc48316040518163ffffffff1660e060020a028152600401602060405180830381600087803b15801561197c57600080fd5b505af1158015611990573d6000803e3d6000fd5b505050506040513d60208110156119a657600080fd5b5051600154600160a060020a03908116911614611a5b576000809054906101000a9004600160a060020a0316600160a060020a03166338cc48316040518163ffffffff1660e060020a028152600401602060405180830381600087803b158015611a0f57600080fd5b505af1158015611a23573d6000803e3d6000fd5b505050506040513d6020811015611a3957600080fd5b505160018054600160a060020a031916600160a060020a039092169190911790555b6001546040517f524f3889000000000000000000000000000000000000000000000000000000008152602060048201818152875160248401528751600160a060020a039094169363524f388993899383926044909201919085019080838360005b83811015611ad4578181015183820152602001611abc565b50505050905090810190601f168015611b015780820380516001836020036101000a031916815260200191505b5092505050602060405180830381600087803b158015611b2057600080fd5b505af1158015611b34573d6000803e3d6000fd5b505050506040513d6020811015611b4a57600080fd5b50519050670de0b6b3a764000062030d403a0201811115611b6e5760009150611cd6565b6001546040517fadf59f9900000000000000000000000000000000000000000000000000000000815260048101878152606060248301908152875160648401528751600160a060020a039094169363adf59f999386938b938b938b936044810191608490910190602087019080838360005b83811015611bf8578181015183820152602001611be0565b50505050905090810190601f168015611c255780820380516001836020036101000a031916815260200191505b50838103825284518152845160209182019186019080838360005b83811015611c58578181015183820152602001611c40565b50505050905090810190601f168015611c855780820380516001836020036101000a031916815260200191505b50955050505050506020604051808303818588803b158015611ca657600080fd5b505af1158015611cba573d6000803e3d6000fd5b50505050506040513d6020811015611cd157600080fd5b505191505b509392505050565b6000828180805b8351811015611e335783517f300000000000000000000000000000000000000000000000000000000000000090859083908110611d1e57fe5b90602001015160f860020a900460f860020a02600160f860020a03191610158015611d94575083517f390000000000000000000000000000000000000000000000000000000000000090859083908110611d7457fe5b90602001015160f860020a900460f860020a02600160f860020a03191611155b15611ded578115611db357851515611dab57611e33565b600019909501945b600a8302925060308482815181101515611dc957fe5b90602001015160f860020a900460f860020a0260f860020a90040383019250611e2b565b8381815181101515611dfb57fe5b90602001015160f860020a900460f860020a02600160f860020a031916602e60f860020a021415611e2b57600191505b600101611ce5565b6000861115611e455785600a0a830292505b509095945050505050565b6000818311611e61578282036118e5565b50900390565b600080611e87731d3b2638a7cc9f2cb3d298a3da7a90b67e5506ed611545565b1115611ef85760008054600160a060020a031916731d3b2638a7cc9f2cb3d298a3da7a90b67e5506ed17905560408051808201909152600b81527f6574685f6d61696e6e65740000000000000000000000000000000000000000006020820152611ef0906123f0565b506001610a44565b6000611f1773c03a2615d5efaf5f49f60b7bb6583eaec212fdf1611545565b1115611f805760008054600160a060020a03191673c03a2615d5efaf5f49f60b7bb6583eaec212fdf117905560408051808201909152600c81527f6574685f726f707374656e3300000000000000000000000000000000000000006020820152611ef0906123f0565b6000611f9f73b7a07bcf2ba2f2703b24c0691b5278999c59ac7e611545565b11156120085760008054600160a060020a03191673b7a07bcf2ba2f2703b24c0691b5278999c59ac7e17905560408051808201909152600981527f6574685f6b6f76616e00000000000000000000000000000000000000000000006020820152611ef0906123f0565b600061202773146500cfd35b22e4a392fe0adc06de1a1368ed48611545565b11156120905760008054600160a060020a03191673146500cfd35b22e4a392fe0adc06de1a1368ed4817905560408051808201909152600b81527f6574685f72696e6b6562790000000000000000000000000000000000000000006020820152611ef0906123f0565b60006120af736f485c8bf6fc43ea212e93bbf8ce046c7f1cb475611545565b11156120e3575060008054600160a060020a031916736f485c8bf6fc43ea212e93bbf8ce046c7f1cb4751790556001610a44565b60006121027320e12a1f859b3feae5fb2a0a32c18f5a65555bbf611545565b1115612136575060008054600160a060020a0319167320e12a1f859b3feae5fb2a0a32c18f5a65555bbf1790556001610a44565b60006121557351efaf4c8b3c9afbd5ab9f4bbc82784ab6ef8faa611545565b1115612189575060008054600160a060020a0319167351efaf4c8b3c9afbd5ab9f4bbc82784ab6ef8faa1790556001610a44565b50600090565b6060806060806060806060806000808e98508d97508c96508b95508a94508451865188518a518c51010101016040519080825280601f01601f1916602001820160405280156121e8578160200160208202803883390190505b50935083925060009150600090505b885181101561225557888181518110151561220e57fe5b90602001015160f860020a900460f860020a02838380600101945081518110151561223557fe5b906020010190600160f860020a031916908160001a9053506001016121f7565b5060005b87518110156122b757878181518110151561227057fe5b90602001015160f860020a900460f860020a02838380600101945081518110151561229757fe5b906020010190600160f860020a031916908160001a905350600101612259565b5060005b86518110156123195786818151811015156122d257fe5b90602001015160f860020a900460f860020a0283838060010194508151811015156122f957fe5b906020010190600160f860020a031916908160001a9053506001016122bb565b5060005b855181101561237b57858181518110151561233457fe5b90602001015160f860020a900460f860020a02838380600101945081518110151561235b57fe5b906020010190600160f860020a031916908160001a90535060010161231d565b5060005b84518110156123dd57848181518110151561239657fe5b90602001015160f860020a900460f860020a0283838060010194508151811015156123bd57fe5b906020010190600160f860020a031916908160001a90535060010161237f565b50909d9c50505050505050505050505050565b80516106cf9060029060208401905b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061244057805160ff191683800117855561246d565b8280016001018555821561246d579182015b8281111561246d578251825591602001919060010190612452565b5061247992915061247d565b5090565b610a4491905b8082111561247957600081556001016124835600d4980e00002f67ad8fb838ac40b098f695814ed62eccaed4e0d1419d27d53f3e4e6f2050726976696c6567650000000000000000000000000000000000000000a165627a7a72305820ec743938e82eb7a7cc679e77159d7029a37b54b880591e959fd5ac19f6423bc60029',
                gas: '4700000'
            }, function (err, deployedContract) {
                if (!err) {
                    if (!deployedContract.address) {
                        console.log(deployedContract["transactionHash"]);
                        $('#addTickerModal').modal('hide');
                        $('#solidBetTransactionModal').modal({
                            keyboard: false,
                            show: true
                        });

                        $.ajax({
                            method: 'POST',
                            contentType: 'application/json',
                            url: '/v1/contracts/add',
                            data: JSON.stringify({
                                account: App.account,
                                type: +visibility_flag,
                                uuid: _currency,
                                category: 'crypto',
                                transactionHash: deployedContract["transactionHash"],
                                execution_time: _executionDelay,
                                subscription_price: _subscriptionPrice
                            }),
                            success: function (data, textStatus, jqXHR) {
                                current_data = data;
                                if (data['success']) {
                                    let content = "";
                                    let link = `https://ropsten.etherscan.io/tx/${deployedContract["transactionHash"]}`;
                                    content += `Track your transaction by clicking <a href="${link}" target="_blank">here</a>`;
                                    $("#solidBetTransactionModalBody").html(content);
                                }
                            },
                            error: function (jqXHR, textStatus, errorThrown) {
                                console.log('Failed to post data.');
                            }
                        });
                    } else {
                        if (current_data['success']) {
                            $('#addTickerModal').modal('hide');
                            $('#solidBetTransactionModal').modal({
                                keyboard: false,
                                show: true
                            });
                            console.log(deployedContract.address);
                            let deployed_contract_content = "";
                            let link = `https://ropsten.etherscan.io/address/${deployedContract["address"]}`;
                            let local_link = `./contracts/${_currency}/${current_data['result'][0]}`;
                            let currency_name = App.tickers_data[_currency]['name'];
                            deployed_contract_content += `Successfully created and deployed contract for currency: ${currency_name}.<br/>`;
                            deployed_contract_content += `Check your contract on the ropsten network <a href="${link}" target="_blank">here</a><br/>`;
                            deployed_contract_content += `Check your deployed contract bet by clicking <a href="${local_link}" target="_blank">here</a><br/>`;
                            $("#solidBetTransactionModalBody").html(deployed_contract_content);
                        }
                    }
                } else {
                    console.log(err);
                }
            });
    },

    getMatches: function () {
        return new Promise((resolve, reject) => {
            $.ajax({
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                method: 'GET',
                url: base_url + '/v1/matches',
                success: function (data, textStatus, jqXHR) {
                    return resolve(data);
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    return reject(errorThrown);
                }
            });
        });
    },

    displayMatches: async () => {
        let c_length = await App.getContractsLength('crypto');
        let data = await App.getMatches();
        if (data && data.length > 0) {
            data.forEach(match => {
                let disabled = typeof c_length[match['id']] === 'undefined' ? 'disabled' : '';
                let timestamp = new Date(match["utcDate"]).getTime();
                App.matches[match.id] = match;
                let content = `<tr>`;
                content += `<td>${match["id"]} - ${match["league"]}</td>`;
                content += `<td>${match["homeTeam"]["name"]} vs ${match["awayTeam"]["name"]}</td>`;
                content += `<td style="word-wrap: break-word">${formatTime(timestamp)}</td>`;
                content += `<td><a href="${base_url}/matches/${match["id"]}" target="_blank"><button type="button" class="btn btn-primary">View</button></a></td>`;
                content += `<td><a href="${base_url}/contracts/${match["id"]}" target="_blank"><button type="button" class="btn btn-primary" ${disabled}>View</button></a></td>`;
                content += `<td><button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addMatchModal" onclick="App.matchId=${match['id']}">Create</button></td>`;
                content += ` < /tr>`;
                $("#upcoming_matches_table").prepend(content);
            });
        }
    },

    getTickers: function () {
        return new Promise((resolve, reject) => {
            $.ajax({
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                method: 'GET',
                url: base_url + '/v1/crypto/tickers',
                success: function (data, textStatus, jqXHR) {
                    return resolve(data);
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    return reject(errorThrown);
                }
            });
        });
    },

    displayTickers: async function () {
        let c_length = await App.getContractsLength('crypto');
        let data = await App.getTickers();
        data.forEach(ticker => {
            let disabled = typeof c_length[ticker['id']] === 'undefined' ? 'disabled' : '';
            let t = `<tr>`;
            t += `<td>${ticker['rank']}</td>`;
            t += `<td><a href="https://coinmarketcap.com/currencies/${ticker['name']}/" target="_blank"><img src="https://s2.coinmarketcap.com/static/img/coins/32x32/${ticker['id']}.png"/></a> ${ticker['name']}</td>`;
            t += `<td><a href="${base_url}/contracts/${ticker['id']}" target="_blank"><button type="button" class="btn btn-primary" ${disabled}>View contracts</button></a></td>`;
            t += `<td><button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addTickerModal" onclick="App.currencyId=${ticker['id']}">
                        Create Bet
                    </button></td>`;
            t += `</tr>`;
            $("#tickets_table").append(t);
        });
    },

    getContractsLength: function (category) {
        return new Promise((resolve, reject) => {
            $.ajax({
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                method: 'POST',
                contentType: 'application/json',
                url: '/v1/contracts/length',
                data: {
                    account: App.account,
                    category: category
                },
                success: function (data, textStatus, jqXHR) {
                    return resolve(data);
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    return reject(errorThrown);
                }
            });
        });
    },

    getMatchDetails: function (match_id) {
        $.ajax({
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            method: 'GET',
            url: `${base_url}/v1/matches/${match_id}`,
            success: function (data, textStatus, jqXHR) {
                let content = "";
                content += `<b>League</b>: ${data['league']}<br/>`;
                content += `<b>Time</b>: ${formatTime(data['timestamp'] * 1000)}<br/>`;
                content += `<b>Countdown</b>: <span id="match_details_countdown_${match_id}"></span><br/>`;
                content += `<b>Status</b>: ${data['status']}<br/>`;
                content += `<b>Team one</b>: ${data['teamOne']['name']}<br/>`;
                content += `<b>Team two</b>: ${data['teamTwo']['name']}<br/>`;
                content += `<b>Team one score</b>: ${data['teamOne']['score']}<br/>`;
                content += `<b>Team two score</b>: ${data['teamTwo']['score']}<br/>`;
                content += `<b>Raw score</b>: ${data['raw']}<br/>`;
                content += `<b>Contracts</b>: <a href="${base_url}/contracts/${match_id}" target="_blank">here</a><br/>`;
                $("#match_details").html(content);                // Set the date we're counting down to
                var countDownDate = new Date(data['timestamp'] * 1000).getTime();

                var x = setInterval(function () {

                    var now = new Date().getTime();

                    var distance = countDownDate - now;

                    var weeks = Math.floor(distance / (1000 * 60 * 60 * 24 * 7));
                    var days = Math.floor(distance / (1000 * 60 * 60 * 24)) % 7;
                    var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                    var seconds = Math.floor((distance % (1000 * 60)) / 1000);

                    document.getElementById(`match_details_countdown_${match_id}`).innerHTML = `${weeks} weeks ${days} d ${hours} hr ${minutes} mins ${seconds} secs`;

                    // If the count down is over, write some text
                    if (distance < 0) {
                        clearInterval(x);
                        document.getElementById(`match_details_countdown_${match_id}`).innerHTML = "ENDED";
                    }
                }, 1000);
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log(errorThrown);
            }
        });
    },

    getContracts: function (uuid) {
        $.ajax({
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            method: 'POST',
            contentType: 'application/json',
            url: '/v1/contracts/mine',
            data: {
                account: App.account,
                uuid: uuid
            },
            success: function (data, textStatus, jqXHR) {
                data.forEach(contract => {
                    let category = contract['category'];
                    let type = contract['type'] === 1 ? 'public' : 'private';
                    let content = "";
                    content += `<tr>`;
                    content += `<td>${contract['uuid']}</td>`;
                    content += `<td>${contract['id']}</td>`;
                    content += `<td>${type}</td>`;
                    content += `<td>${formatTime(contract['time'] * 1000)}</td>`;
                    content += `<td>${formatTime(contract['execution_time'] * 1000)}</td>`;
                    content += `<td><a href="https://ropsten.etherscan.io/tx/${contract['transactionHash']}" target="_blank">here</a></td>`;
                    content += `<td><a href="${base_url}/contracts/${uuid}/${contract['id']}" target="_blank">here</a></td>`;
                    content += `</tr>`;
                    $("#contracts").prepend(content);
                });
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log(errorThrown);
            }
        });
    },

    getContract: function (uuid, betId) {
        $.ajax({
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            method: 'POST',
            contentType: 'application/json',
            url: '/v1/contracts/fetch',
            data: {
                account: App.account,
                uuid: uuid,
                id: betId
            },
            success: function (_data, textStatus, jqXHR) {
                if (_data.length === 1) {
                    let data = _data[0];
                    if (data['category'] === 'sports') {
                        /**
                         * Match
                         */
                        let MatchContract = web3.eth.contract(SOLID_SPORT_BET_ABI);
                        App.MatchInstance = MatchContract.at(data['contractAddress']);
                        let states = ['PENDING', "SUCCESS"];
                        App.MatchInstance.details(function (err, res) {
                            if (!err) {
                                App.MatchInstancePrice = res[6].valueOf();
                                let _matchId = res[0];
                                let _league = web3.toAscii(res[1]);
                                let _teamOne = web3.toAscii(res[2]);
                                let _teamTwo = web3.toAscii(res[3]);
                                let _matchTimestamp = (res[4]).valueOf() * 1000;
                                let _executionDelay = (res[5]).valueOf() * 1000;
                                App.execution_time = res[5].valueOf();
                                let _price = (res[6]).valueOf() / 1e18;
                                let _status = res[7];
                                let content = "";
                                content += `<b>Match #</b>: ${_matchId}<br/>`;
                                content += `<b>Bet #</b>: ${betId}<br/>`;
                                content += `<b>League</b>: ${_league}<br/>`;
                                content += `<b>Team one</b>: ${_teamOne}<br/>`;
                                content += `<b>Team two</b>: ${_teamTwo}<br/>`;
                                content += `<b>Time</b>: ${formatTime(_matchTimestamp)}<br/>`;
                                content += `<b>Execution delay</b>: ${formatTime(_executionDelay)}<br/>`;
                                content += `<b>Price</b>: ${_price} ETH <br/>`;
                                content += `<b>Status</b>: ${states[_status]}<br/>`;
                                $("#bet_details").html(content);
                            }
                        });

                        let allEvents = App.MatchInstance.newSubscriber({
                            // address: App.account
                        }, {
                            fromBlock: 0,
                            toBlock: 'latest',
                        });

                        allEvents.watch(function (error, event) {
                            if (!error) {
                                let result = event['args'];
                                let content = `<tr>`;
                                content += `<td>${result['addr']}</td>`;
                                content += `<td>${result['scoreOne']}</td>`;
                                content += `<td>${result['scoreTwo']}</td>`;
                                content += `</tr>`;
                                $("#bet_subscribers").prepend(content)
                                // console.log(event);
                            }
                        });

                        let allEvents2 = App.MatchInstance.betResolved({
                            // address: App.account
                        }, {
                            fromBlock: 0,
                            toBlock: 'latest',
                        });

                        allEvents2.watch(function (error, event) {
                            if (!error) {
                                let result = event['args'];
                                let scoreOne = result['scoreOne'].valueOf();
                                let scoreTwo = result['scoreTwo'].valueOf();
                                let content = ``;
                                content += `<b>Score one</b>: ${scoreOne}<br/>`;
                                content += `<b>Score two</b>: ${scoreTwo}`;
                                $("#result_details").html(content)
                            }
                        });
                    } else {
                        /**
                         * Crypto contract details
                         */

                        let CryptoContract = web3.eth.contract(SOLID_CRYPTO_BET_ABI);
                        App.CryptoInstance = CryptoContract.at(data['contractAddress']);
                        /**
                         * OPENED, PENDING, EXECUTED, ERROR
                         */

                        let states = ['OPENED', 'PENDING', 'EXECUTED', 'ERROR'];
                        $("#contractAddress").html(data['contractAddress']);
                        App.CryptoInstance.currency(function (err, res) {
                            $("#currency").html(res.valueOf());
                        });

                        App.CryptoInstance.closureDelay(function (err, res) {
                            $("#closureDelay").html(formatTime(res.valueOf() * 1000));
                        });

                        App.CryptoInstance.executionDelay(function (err, res) {
                            $("#executionDelay").html(formatTime(res.valueOf() * 1000));
                            App.execution_time = res.valueOf();
                        });

                        App.CryptoInstance.subscriptionPrice(function (err, res) {
                            $("#subscriptionPrice").html((res.valueOf() / 1e18) + " ETH");
                            App.CryptoInstancePrice = res.valueOf();
                        });

                        App.CryptoInstance.status(function (err, res) {
                            $("#status").html(states[res.valueOf()]);
                        });

                        App.CryptoInstance.winGuess.call(function (err, res) {
                            if (res.valueOf() == 0) {
                                $("#winGuess").html('-');
                            } else {
                                $("#winGuess").html(res.valueOf());
                            }
                        });

                        App.CryptoInstance.winReward.call(function (err, res) {
                            if (res.valueOf() == 0) {
                                $("#winReward").html('-');
                            } else {
                                $("#winReward").html(res.valueOf());
                            }
                        });

                        let allEvents = App.CryptoInstance.newSubscriber({
                            // address: App.account
                        }, {
                            fromBlock: 0,
                            toBlock: 'latest',
                        });

                        allEvents.watch(function (error, event) {
                            if (!error) {
                                let result = event['args'];
                                let content = `<tr>`;
                                content += `<td>${result['addr']}</td>`;
                                content += `<td>${result['guess']}</td>`;
                                content += `</tr>`;
                                $("#bet_subscribers").prepend(content)
                            }
                        });
                    }
                }
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log(errorThrown);
            }
        });
    },

    subscribeMatchContract: function () {
        let inputTeamScoreOne = $("#inputTeamScoreOne").val();
        let inputTeamScoreTwo = $("#inputTeamScoreTwo").val();
        App.MatchInstance.subscribe(inputTeamScoreOne, inputTeamScoreTwo, {
            value: App.MatchInstancePrice,
            from: App.account
        }, function (err, res) {
            if (err) {
                console.log(err);
            } else {
                $.ajax({
                    method: 'POST',
                    contentType: 'application/json',
                    url: '/v1/bets/add',
                    data: JSON.stringify({
                        id: App.betId,
                        category: 'matches',
                        account: App.account,
                        transactionHash: res,
                        contractAddress: App.MatchInstance.address,
                        execution_time: App.execution_time
                    }),
                    success: function (data, textStatus, jqXHR) {
                        let content = "";
                        let link = `https://ropsten.etherscan.io/tx/${res}`;
                        content += `Successfully subscribed for match: ${+App.matchId}<br/>`;
                        content += `Track your transaction on the ropsten network by clicking <a href="${link}" target="_blank">here</a>`
                        $("#solidBetTransactionModalBody").html(content);
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        console.log('Failed to post data.');
                    }
                });
            }
        });
    },

    subscribeCryptoContract: function () {
        let guess_input = $("#guess_input").val();
        App.CryptoInstance.subscribe(guess_input, {
            value: App.CryptoInstancePrice,
            from: App.account
        }, function (err, res) {
            if (err) {
                console.log(err);
            } else {
                $.ajax({
                    method: 'POST',
                    contentType: 'application/json',
                    url: '/v1/bets/add',
                    data: JSON.stringify({
                        id: App.betId,
                        category: 'crypto',
                        account: App.account,
                        transactionHash: res,
                        contractAddress: App.CryptoInstance.address,
                        execution_time: App.execution_time
                    }),
                    success: function (data, textStatus, jqXHR) {
                        console.log(data)
                        let content = "";
                        let link = `https://ropsten.etherscan.io/tx/${res}`;
                        content += `Successfully subscribed for match: ${+App.uuid}<br/>`;
                        content += `Track your transaction on the ropsten network by clicking <a href="${link}" target="_blank">here</a>`
                        $("#solidBetTransactionModalBody").html(content);
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        console.log('Failed to post data.');
                    }
                });
            }
        });
    },

    showBets: async (category) => {
        let public_bets = await App.getBets(category, 'public');
        let private_bets = await App.getBets(category, 'private');
        let data = public_bets.concat(private_bets);
        if (data && data.length > 0) {
            for (let i = 0; i < data.length; i++) {
                let contract = data[i];
                let type = contract['type'] === 1 ? 'public' : 'private';
                // let category = contract['category'];
                let content = "";
                content += `<tr>`;
                content += `<td>${(i + 1)}</td>`;
                if (category === 'crypto') {
                    if (typeof App.tickers_data[contract['uuid']] !== 'undefined') {
                        content += `<td>${App.tickers_data[contract['uuid']]['name']}</td>`;
                    } else {
                        content += `<td>-</td>`;
                    }
                }
                content += `<td>${contract['subscription_price'] / 1e18} ETH</td>`;
                content += `<td>${type}</td>`;
                content += `<td>${formatTime(contract['execution_time'] * 1000)}</td>`;
                let bet_id = type === 'public' ? 'id' : 'betId';
                content += `<td><a href="${base_url}/contracts/${contract['uuid']}/${contract[bet_id]}" target="_blank"><button type="button" class="btn btn-primary">Open</button></a></td>`;
                content += `</tr>`;
                $("#bets").prepend(content);
            }
        }
    },

    getBets: async (category, type) => {
        return new Promise((resolve, reject) => {
            $.ajax({
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                method: 'POST',
                contentType: 'application/json',
                url: `/v1/contracts/${type}`,
                data: {
                    account: App.account,
                    category: category
                },
                success: function (data, textStatus, jqXHR) {
                    return resolve(data);
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    return reject(errorThrown);
                }
            });
        });
    },

    getInactiveBets: function () {
        $.ajax({
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            method: 'POST',
            contentType: 'application/json',
            url: '/v1/contracts/inactive',
            data: {
                account: App.account
            },
            success: function (data, textStatus, jqXHR) {
                if (data && data.length > 0) {
                    data.forEach(contract => {
                        let type = contract['type'] === 1 ? 'public' : 'private';
                        // let category = contract['category'];
                        let content = "";
                        content += `<tr>`;
                        content += `<td>${contract['id']}</td>`;
                        content += `<td>${type}</td>`;
                        content += `<td>${formatTime(contract['execution_time'] * 1000)}</td>`;
                        content += `<td><a href="${base_url}/contracts/${contract['uuid']}/${contract['id']}" target="_blank">here</a></td>`;
                        content += `</tr>`;
                        $("#bets").prepend(content);
                    });
                }
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log(errorThrown);
            }
        });


        $.ajax({
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            method: 'POST',
            contentType: 'application/json',
            url: '/v1/bets/inactive',
            data: {
                account: App.account
            },
            success: function (data, textStatus, jqXHR) {
                if (data && data.length > 0) {
                    data.forEach(contract => {
                        let type = contract['type'] === 1 ? 'public' : 'private';
                        // let category = contract['category'];
                        let content = "";
                        content += `<tr>`;
                        content += `<td>${contract['id']}</td>`;
                        content += `<td>${type}</td>`;
                        content += `<td>${formatTime(contract['execution_time'] * 1000)}</td>`;
                        content += `<td><a href="${base_url}/contracts/${contract['uuid']}/${contract['id']}" target="_blank">here</a></td>`;
                        content += `</tr>`;
                        $("#bets").prepend(content);
                    });
                }
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log(errorThrown);
            }
        });
    },

    load: async () => {
        App.account = await App.getAccount();
    },

    getTickersData: async () => {
        // let _data = await $.getJSON('https://pastebin.com/raw/MCAe7agQ');
        App.tickers_data = {
            "1": {
                "id": 1,
                "name": "Bitcoin",
                "symbol": "BTC",
                "website_slug": "bitcoin",
                "rank": 1,
                "circulating_supply": 17330525.0,
                "total_supply": 17330525.0,
                "max_supply": 21000000.0,
                "quotes": {
                    "USD": {
                        "price": 6467.16127525,
                        "volume_24h": 3779521119.94573,
                        "market_cap": 112079300160.0,
                        "percent_change_1h": 0.17,
                        "percent_change_24h": -0.96,
                        "percent_change_7d": 2.75
                    }
                },
                "last_updated": 1539968304
            },
            "1027": {
                "id": 1027,
                "name": "Ethereum",
                "symbol": "ETH",
                "website_slug": "ethereum",
                "rank": 2,
                "circulating_supply": 102670610.0,
                "total_supply": 102670610.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 204.406597424,
                        "volume_24h": 1334117987.24995,
                        "market_cap": 20986550065.0,
                        "percent_change_1h": 0.37,
                        "percent_change_24h": -0.16,
                        "percent_change_7d": 3.44
                    }
                },
                "last_updated": 1539968324
            },
            "52": {
                "id": 52,
                "name": "XRP",
                "symbol": "XRP",
                "website_slug": "ripple",
                "rank": 3,
                "circulating_supply": 39997634397.0,
                "total_supply": 99991817275.0,
                "max_supply": 100000000000.0,
                "quotes": {
                    "USD": {
                        "price": 0.4533663344,
                        "volume_24h": 398388718.230051,
                        "market_cap": 18133580891.0,
                        "percent_change_1h": 0.32,
                        "percent_change_24h": -0.7,
                        "percent_change_7d": 6.37
                    }
                },
                "last_updated": 1539968284
            },
            "1831": {
                "id": 1831,
                "name": "Bitcoin Cash",
                "symbol": "BCH",
                "website_slug": "bitcoin-cash",
                "rank": 4,
                "circulating_supply": 17411063.0,
                "total_supply": 17411063.0,
                "max_supply": 21000000.0,
                "quotes": {
                    "USD": {
                        "price": 442.197242005,
                        "volume_24h": 342266063.014349,
                        "market_cap": 7699123818.0,
                        "percent_change_1h": 1.07,
                        "percent_change_24h": -0.19,
                        "percent_change_7d": -0.79
                    }
                },
                "last_updated": 1539968318
            },
            "1765": {
                "id": 1765,
                "name": "EOS",
                "symbol": "EOS",
                "website_slug": "eos",
                "rank": 5,
                "circulating_supply": 906245118.0,
                "total_supply": 1006245120.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 5.3548000555,
                        "volume_24h": 420675262.359711,
                        "market_cap": 4852761406.0,
                        "percent_change_1h": 0.23,
                        "percent_change_24h": -0.44,
                        "percent_change_7d": 2.94
                    }
                },
                "last_updated": 1539968311
            },
            "512": {
                "id": 512,
                "name": "Stellar",
                "symbol": "XLM",
                "website_slug": "stellar",
                "rank": 6,
                "circulating_supply": 18891505589.0,
                "total_supply": 104383522082.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.2431423375,
                        "volume_24h": 54276914.4945343,
                        "market_cap": 4593324828.0,
                        "percent_change_1h": 1.76,
                        "percent_change_24h": 2.83,
                        "percent_change_7d": 12.44
                    }
                },
                "last_updated": 1539968298
            },
            "2": {
                "id": 2,
                "name": "Litecoin",
                "symbol": "LTC",
                "website_slug": "litecoin",
                "rank": 7,
                "circulating_supply": 58793627.0,
                "total_supply": 58793627.0,
                "max_supply": 84000000.0,
                "quotes": {
                    "USD": {
                        "price": 53.4019151153,
                        "volume_24h": 285189134.227734,
                        "market_cap": 3139692268.0,
                        "percent_change_1h": 0.49,
                        "percent_change_24h": 1.44,
                        "percent_change_7d": 0.26
                    }
                },
                "last_updated": 1539968280
            },
            "825": {
                "id": 825,
                "name": "Tether",
                "symbol": "USDT",
                "website_slug": "tether",
                "rank": 8,
                "circulating_supply": 2126421736.0,
                "total_supply": 3080109502.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.9854962017,
                        "volume_24h": 2406935866.34221,
                        "market_cap": 2095580544.0,
                        "percent_change_1h": 0.15,
                        "percent_change_24h": 0.97,
                        "percent_change_7d": -0.82
                    }
                },
                "last_updated": 1539968306
            },
            "2010": {
                "id": 2010,
                "name": "Cardano",
                "symbol": "ADA",
                "website_slug": "cardano",
                "rank": 9,
                "circulating_supply": 25927070538.0,
                "total_supply": 31112483745.0,
                "max_supply": 45000000000.0,
                "quotes": {
                    "USD": {
                        "price": 0.0757181304,
                        "volume_24h": 21718134.7537713,
                        "market_cap": 1963149308.0,
                        "percent_change_1h": 0.69,
                        "percent_change_24h": 0.13,
                        "percent_change_7d": 1.49
                    }
                },
                "last_updated": 1539968314
            },
            "328": {
                "id": 328,
                "name": "Monero",
                "symbol": "XMR",
                "website_slug": "monero",
                "rank": 10,
                "circulating_supply": 16496695.0,
                "total_supply": 16496695.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 104.026311246,
                        "volume_24h": 20196873.7325436,
                        "market_cap": 1716090354.0,
                        "percent_change_1h": 0.16,
                        "percent_change_24h": 0.19,
                        "percent_change_7d": 1.81
                    }
                },
                "last_updated": 1539968299
            },
            "1958": {
                "id": 1958,
                "name": "TRON",
                "symbol": "TRX",
                "website_slug": "tron",
                "rank": 11,
                "circulating_supply": 65748111645.0,
                "total_supply": 99000000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.0241501534,
                        "volume_24h": 87097712.2419338,
                        "market_cap": 1587826980.0,
                        "percent_change_1h": 0.69,
                        "percent_change_24h": -0.74,
                        "percent_change_7d": 5.33
                    }
                },
                "last_updated": 1539968315
            },
            "1720": {
                "id": 1720,
                "name": "IOTA",
                "symbol": "MIOTA",
                "website_slug": "iota",
                "rank": 12,
                "circulating_supply": 2779530283.0,
                "total_supply": 2779530283.0,
                "max_supply": 2779530283.0,
                "quotes": {
                    "USD": {
                        "price": 0.4933184138,
                        "volume_24h": 16333184.4546577,
                        "market_cap": 1371193470.0,
                        "percent_change_1h": 0.45,
                        "percent_change_24h": -1.05,
                        "percent_change_7d": -1.09
                    }
                },
                "last_updated": 1539968308
            },
            "131": {
                "id": 131,
                "name": "Dash",
                "symbol": "DASH",
                "website_slug": "dash",
                "rank": 13,
                "circulating_supply": 8390189.0,
                "total_supply": 8390189.0,
                "max_supply": 18900000.0,
                "quotes": {
                    "USD": {
                        "price": 153.975814164,
                        "volume_24h": 163593712.812512,
                        "market_cap": 1291886259.0,
                        "percent_change_1h": 0.32,
                        "percent_change_24h": -2.07,
                        "percent_change_7d": -2.89
                    }
                },
                "last_updated": 1539968290
            },
            "1839": {
                "id": 1839,
                "name": "Binance Coin",
                "symbol": "BNB",
                "website_slug": "binance-coin",
                "rank": 14,
                "circulating_supply": 130799315.0,
                "total_supply": 190799315.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 9.7851616004,
                        "volume_24h": 26678990.3904622,
                        "market_cap": 1279892434.0,
                        "percent_change_1h": 0.5,
                        "percent_change_24h": -0.52,
                        "percent_change_7d": 2.57
                    }
                },
                "last_updated": 1539968313
            },
            "1376": {
                "id": 1376,
                "name": "NEO",
                "symbol": "NEO",
                "website_slug": "neo",
                "rank": 15,
                "circulating_supply": 65000000.0,
                "total_supply": 100000000.0,
                "max_supply": 100000000.0,
                "quotes": {
                    "USD": {
                        "price": 16.4068698189,
                        "volume_24h": 251937324.882426,
                        "market_cap": 1066446538.0,
                        "percent_change_1h": 0.07,
                        "percent_change_24h": -1.65,
                        "percent_change_7d": 3.63
                    }
                },
                "last_updated": 1539968311
            },
            "1321": {
                "id": 1321,
                "name": "Ethereum Classic",
                "symbol": "ETC",
                "website_slug": "ethereum-classic",
                "rank": 16,
                "circulating_supply": 105393760.0,
                "total_supply": 105393760.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 9.6393479739,
                        "volume_24h": 135617112.42361,
                        "market_cap": 1015927127.0,
                        "percent_change_1h": 0.24,
                        "percent_change_24h": -0.26,
                        "percent_change_7d": 1.71
                    }
                },
                "last_updated": 1539968306
            },
            "873": {
                "id": 873,
                "name": "NEM",
                "symbol": "XEM",
                "website_slug": "nem",
                "rank": 17,
                "circulating_supply": 8999999999.0,
                "total_supply": 8999999999.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.0939860387,
                        "volume_24h": 4973343.0778167,
                        "market_cap": 845874348.0,
                        "percent_change_1h": 0.15,
                        "percent_change_24h": -1.24,
                        "percent_change_7d": 1.91
                    }
                },
                "last_updated": 1539968306
            },
            "2011": {
                "id": 2011,
                "name": "Tezos",
                "symbol": "XTZ",
                "website_slug": "tezos",
                "rank": 18,
                "circulating_supply": 607489041.0,
                "total_supply": 763306930.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 1.2981934177,
                        "volume_24h": 2510123.43003289,
                        "market_cap": 788638274.0,
                        "percent_change_1h": 0.38,
                        "percent_change_24h": -4.4,
                        "percent_change_7d": 6.02
                    }
                },
                "last_updated": 1539968312
            },
            "3077": {
                "id": 3077,
                "name": "VeChain",
                "symbol": "VET",
                "website_slug": "vechain",
                "rank": 19,
                "circulating_supply": 55454734800.0,
                "total_supply": 86712634466.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.0114975451,
                        "volume_24h": 9947805.16156017,
                        "market_cap": 637593316.0,
                        "percent_change_1h": 0.41,
                        "percent_change_24h": -0.13,
                        "percent_change_7d": -0.73
                    }
                },
                "last_updated": 1539968331
            },
            "1437": {
                "id": 1437,
                "name": "Zcash",
                "symbol": "ZEC",
                "website_slug": "zcash",
                "rank": 20,
                "circulating_supply": 5047769.0,
                "total_supply": 5047769.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 118.849660808,
                        "volume_24h": 59248348.1498607,
                        "market_cap": 599925604.0,
                        "percent_change_1h": 0.94,
                        "percent_change_24h": -1.54,
                        "percent_change_7d": 7.92
                    }
                },
                "last_updated": 1539968311
            },
            "74": {
                "id": 74,
                "name": "Dogecoin",
                "symbol": "DOGE",
                "website_slug": "dogecoin",
                "rank": 21,
                "circulating_supply": 116626665545.0,
                "total_supply": 116626665545.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.004549787,
                        "volume_24h": 14847861.4280217,
                        "market_cap": 530626485.0,
                        "percent_change_1h": 5.51,
                        "percent_change_24h": 2.58,
                        "percent_change_7d": -13.14
                    }
                },
                "last_updated": 1539968282
            },
            "1518": {
                "id": 1518,
                "name": "Maker",
                "symbol": "MKR",
                "website_slug": "maker",
                "rank": 22,
                "circulating_supply": 728228.0,
                "total_supply": 1000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 675.057910943,
                        "volume_24h": 614705.615096785,
                        "market_cap": 491595917.0,
                        "percent_change_1h": 0.14,
                        "percent_change_24h": 1.11,
                        "percent_change_7d": 4.16
                    }
                },
                "last_updated": 1539968317
            },
            "1896": {
                "id": 1896,
                "name": "0x",
                "symbol": "ZRX",
                "website_slug": "0x",
                "rank": 23,
                "circulating_supply": 542555908.0,
                "total_supply": 1000000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.8936378284,
                        "volume_24h": 28198789.2259445,
                        "market_cap": 484848483.0,
                        "percent_change_1h": 0.73,
                        "percent_change_24h": 5.03,
                        "percent_change_7d": 15.68
                    }
                },
                "last_updated": 1539968316
            },
            "1808": {
                "id": 1808,
                "name": "OmiseGO",
                "symbol": "OMG",
                "website_slug": "omisego",
                "rank": 24,
                "circulating_supply": 140245398.0,
                "total_supply": 140245398.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 3.2933174576,
                        "volume_24h": 20844983.849378,
                        "market_cap": 461872618.0,
                        "percent_change_1h": 1.9,
                        "percent_change_24h": 1.61,
                        "percent_change_7d": 8.16
                    }
                },
                "last_updated": 1539968306
            },
            "2083": {
                "id": 2083,
                "name": "Bitcoin Gold",
                "symbol": "BTG",
                "website_slug": "bitcoin-gold",
                "rank": 25,
                "circulating_supply": 17296349.0,
                "total_supply": 17396349.0,
                "max_supply": 21000000.0,
                "quotes": {
                    "USD": {
                        "price": 25.9909901465,
                        "volume_24h": 2059180.93484293,
                        "market_cap": 449549226.0,
                        "percent_change_1h": 0.33,
                        "percent_change_24h": -0.16,
                        "percent_change_7d": 3.79
                    }
                },
                "last_updated": 1539968321
            },
            "2566": {
                "id": 2566,
                "name": "Ontology",
                "symbol": "ONT",
                "website_slug": "ontology",
                "rank": 26,
                "circulating_supply": 207016949.0,
                "total_supply": 1000000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 1.816037016,
                        "volume_24h": 21534639.9654396,
                        "market_cap": 375950442.0,
                        "percent_change_1h": 0.48,
                        "percent_change_24h": -1.57,
                        "percent_change_7d": 2.86
                    }
                },
                "last_updated": 1539968320
            },
            "1684": {
                "id": 1684,
                "name": "Qtum",
                "symbol": "QTUM",
                "website_slug": "qtum",
                "rank": 27,
                "circulating_supply": 88972956.0,
                "total_supply": 100972956.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 3.8814120913,
                        "volume_24h": 76511507.2756675,
                        "market_cap": 345340707.0,
                        "percent_change_1h": 1.55,
                        "percent_change_24h": 0.7,
                        "percent_change_7d": 11.44
                    }
                },
                "last_updated": 1539968314
            },
            "1168": {
                "id": 1168,
                "name": "Decred",
                "symbol": "DCR",
                "website_slug": "decred",
                "rank": 28,
                "circulating_supply": 8667928.0,
                "total_supply": 8667928.0,
                "max_supply": 21000000.0,
                "quotes": {
                    "USD": {
                        "price": 38.5522694868,
                        "volume_24h": 595241.40405904,
                        "market_cap": 334168278.0,
                        "percent_change_1h": 0.08,
                        "percent_change_24h": -0.72,
                        "percent_change_7d": 4.38
                    }
                },
                "last_updated": 1539968311
            },
            "1214": {
                "id": 1214,
                "name": "Lisk",
                "symbol": "LSK",
                "website_slug": "lisk",
                "rank": 29,
                "circulating_supply": 111329225.0,
                "total_supply": 126566416.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 2.8806828702,
                        "volume_24h": 5728085.22416741,
                        "market_cap": 320704191.0,
                        "percent_change_1h": -0.23,
                        "percent_change_24h": 0.32,
                        "percent_change_7d": -3.98
                    }
                },
                "last_updated": 1539968305
            },
            "1700": {
                "id": 1700,
                "name": "Aeternity",
                "symbol": "AE",
                "website_slug": "aeternity",
                "rank": 30,
                "circulating_supply": 233020472.0,
                "total_supply": 273685830.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 1.2951557817,
                        "volume_24h": 7981076.67522496,
                        "market_cap": 301797812.0,
                        "percent_change_1h": 0.6,
                        "percent_change_24h": 4.35,
                        "percent_change_7d": 15.12
                    }
                },
                "last_updated": 1539968312
            },
            "2099": {
                "id": 2099,
                "name": "ICON",
                "symbol": "ICX",
                "website_slug": "icon",
                "rank": 31,
                "circulating_supply": 387431340.0,
                "total_supply": 800460000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.6989338015,
                        "volume_24h": 14263879.9932635,
                        "market_cap": 270788859.0,
                        "percent_change_1h": 0.23,
                        "percent_change_24h": 0.35,
                        "percent_change_7d": 14.97
                    }
                },
                "last_updated": 1539968319
            },
            "1567": {
                "id": 1567,
                "name": "Nano",
                "symbol": "NANO",
                "website_slug": "nano",
                "rank": 32,
                "circulating_supply": 133248289.0,
                "total_supply": 133248289.0,
                "max_supply": 133248290.0,
                "quotes": {
                    "USD": {
                        "price": 2.0293833015,
                        "volume_24h": 5475752.78469947,
                        "market_cap": 270411853.0,
                        "percent_change_1h": -0.17,
                        "percent_change_24h": 1.71,
                        "percent_change_7d": 8.52
                    }
                },
                "last_updated": 1539968312
            },
            "2469": {
                "id": 2469,
                "name": "Zilliqa",
                "symbol": "ZIL",
                "website_slug": "zilliqa",
                "rank": 33,
                "circulating_supply": 7781012516.0,
                "total_supply": 12600000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.0341931267,
                        "volume_24h": 4254440.83215432,
                        "market_cap": 266057147.0,
                        "percent_change_1h": 0.34,
                        "percent_change_24h": 1.29,
                        "percent_change_7d": 5.05
                    }
                },
                "last_updated": 1539968321
            },
            "2222": {
                "id": 2222,
                "name": "Bitcoin Diamond",
                "symbol": "BCD",
                "website_slug": "bitcoin-diamond",
                "rank": 34,
                "circulating_supply": 153756875.0,
                "total_supply": 156756875.0,
                "max_supply": 210000000.0,
                "quotes": {
                    "USD": {
                        "price": 1.7089707976,
                        "volume_24h": 1013207.13483054,
                        "market_cap": 262766009.0,
                        "percent_change_1h": -0.13,
                        "percent_change_24h": -0.24,
                        "percent_change_7d": 0.74
                    }
                },
                "last_updated": 1539968314
            },
            "463": {
                "id": 463,
                "name": "BitShares",
                "symbol": "BTS",
                "website_slug": "bitshares",
                "rank": 35,
                "circulating_supply": 2666090000.0,
                "total_supply": 2666090000.0,
                "max_supply": 3600570502.0,
                "quotes": {
                    "USD": {
                        "price": 0.0975910539,
                        "volume_24h": 3108593.13925644,
                        "market_cap": 260186533.0,
                        "percent_change_1h": 0.51,
                        "percent_change_24h": -1.66,
                        "percent_change_7d": -0.69
                    }
                },
                "last_updated": 1539968301
            },
            "109": {
                "id": 109,
                "name": "DigiByte",
                "symbol": "DGB",
                "website_slug": "digibyte",
                "rank": 36,
                "circulating_supply": 10943185269.0,
                "total_supply": 10943185269.0,
                "max_supply": 21000000000.0,
                "quotes": {
                    "USD": {
                        "price": 0.0236934154,
                        "volume_24h": 1938115.39425363,
                        "market_cap": 259281434.0,
                        "percent_change_1h": 1.84,
                        "percent_change_24h": 1.19,
                        "percent_change_7d": 1.81
                    }
                },
                "last_updated": 1539968284
            },
            "1042": {
                "id": 1042,
                "name": "Siacoin",
                "symbol": "SC",
                "website_slug": "siacoin",
                "rank": 37,
                "circulating_supply": 37469498550.0,
                "total_supply": 37469498550.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.0065849965,
                        "volume_24h": 3164982.74396909,
                        "market_cap": 246736515.0,
                        "percent_change_1h": -1.04,
                        "percent_change_24h": 1.73,
                        "percent_change_7d": 7.44
                    }
                },
                "last_updated": 1539968311
            },
            "372": {
                "id": 372,
                "name": "Bytecoin",
                "symbol": "BCN",
                "website_slug": "bytecoin-bcn",
                "rank": 38,
                "circulating_supply": 184066828814.0,
                "total_supply": 184066828814.0,
                "max_supply": 184470000000.0,
                "quotes": {
                    "USD": {
                        "price": 0.0013399226,
                        "volume_24h": 1464991.32064451,
                        "market_cap": 246635300.0,
                        "percent_change_1h": 0.33,
                        "percent_change_24h": -1.24,
                        "percent_change_7d": -5.1
                    }
                },
                "last_updated": 1539968295
            },
            "1697": {
                "id": 1697,
                "name": "Basic Attention Token",
                "symbol": "BAT",
                "website_slug": "basic-attention-token",
                "rank": 39,
                "circulating_supply": 1000000000.0,
                "total_supply": 1500000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.2310855139,
                        "volume_24h": 17963280.647518,
                        "market_cap": 231085514.0,
                        "percent_change_1h": 0.46,
                        "percent_change_24h": 11.94,
                        "percent_change_7d": 29.11
                    }
                },
                "last_updated": 1539968338
            },
            "1230": {
                "id": 1230,
                "name": "Steem",
                "symbol": "STEEM",
                "website_slug": "steem",
                "rank": 40,
                "circulating_supply": 280287374.0,
                "total_supply": 297261468.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.8121211288,
                        "volume_24h": 921383.847772423,
                        "market_cap": 227627299.0,
                        "percent_change_1h": 0.63,
                        "percent_change_24h": -0.68,
                        "percent_change_7d": 0.03
                    }
                },
                "last_updated": 1539968307
            },
            "693": {
                "id": 693,
                "name": "Verge",
                "symbol": "XVG",
                "website_slug": "verge",
                "rank": 41,
                "circulating_supply": 15172086051.0,
                "total_supply": 15172086051.0,
                "max_supply": 16555000000.0,
                "quotes": {
                    "USD": {
                        "price": 0.0141972724,
                        "volume_24h": 2695428.63856968,
                        "market_cap": 215402238.0,
                        "percent_change_1h": 0.39,
                        "percent_change_24h": -0.3,
                        "percent_change_7d": -0.8
                    }
                },
                "last_updated": 1539968303
            },
            "1274": {
                "id": 1274,
                "name": "Waves",
                "symbol": "WAVES",
                "website_slug": "waves",
                "rank": 42,
                "circulating_supply": 100000000.0,
                "total_supply": 100000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 1.945230507,
                        "volume_24h": 5568283.77161455,
                        "market_cap": 194523051.0,
                        "percent_change_1h": -0.29,
                        "percent_change_24h": -2.35,
                        "percent_change_7d": 2.92
                    }
                },
                "last_updated": 1539968310
            },
            "2603": {
                "id": 2603,
                "name": "Pundi X",
                "symbol": "NPXS",
                "website_slug": "pundi-x",
                "rank": 43,
                "circulating_supply": 125649999413.0,
                "total_supply": 280255193861.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.0015312997,
                        "volume_24h": 2369673.43094024,
                        "market_cap": 192407803.0,
                        "percent_change_1h": 1.81,
                        "percent_change_24h": 1.47,
                        "percent_change_7d": 3.99
                    }
                },
                "last_updated": 1539968319
            },
            "1866": {
                "id": 1866,
                "name": "Bytom",
                "symbol": "BTM",
                "website_slug": "bytom",
                "rank": 44,
                "circulating_supply": 1002499275.0,
                "total_supply": 1407000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.1840329509,
                        "volume_24h": 68007338.6762414,
                        "market_cap": 184492900.0,
                        "percent_change_1h": -0.72,
                        "percent_change_24h": 2.21,
                        "percent_change_7d": 4.9
                    }
                },
                "last_updated": 1539968316
            },
            "2137": {
                "id": 2137,
                "name": "Electroneum",
                "symbol": "ETN",
                "website_slug": "electroneum",
                "rank": 45,
                "circulating_supply": 8149086306.0,
                "total_supply": 8149086306.0,
                "max_supply": 21000000000.0,
                "quotes": {
                    "USD": {
                        "price": 0.0199352287,
                        "volume_24h": 905323.946547355,
                        "market_cap": 162453900.0,
                        "percent_change_1h": 0.27,
                        "percent_change_24h": 0.42,
                        "percent_change_7d": -7.17
                    }
                },
                "last_updated": 1539968317
            },
            "2563": {
                "id": 2563,
                "name": "TrueUSD",
                "symbol": "TUSD",
                "website_slug": "trueusd",
                "rank": 46,
                "circulating_supply": 158312199.0,
                "total_supply": 158312199.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 1.0136777584,
                        "volume_24h": 19446191.8636578,
                        "market_cap": 160477555.0,
                        "percent_change_1h": -0.04,
                        "percent_change_24h": -0.26,
                        "percent_change_7d": -0.07
                    }
                },
                "last_updated": 1539968321
            },
            "1703": {
                "id": 1703,
                "name": "Metaverse ETP",
                "symbol": "ETP",
                "website_slug": "metaverse",
                "rank": 47,
                "circulating_supply": 52792005.0,
                "total_supply": 56626138.0,
                "max_supply": 100000000.0,
                "quotes": {
                    "USD": {
                        "price": 3.0295512999,
                        "volume_24h": 7327654.72051853,
                        "market_cap": 159936087.0,
                        "percent_change_1h": 0.13,
                        "percent_change_24h": -0.73,
                        "percent_change_7d": -4.25
                    }
                },
                "last_updated": 1539968312
            },
            "2682": {
                "id": 2682,
                "name": "Holo",
                "symbol": "HOT",
                "website_slug": "holo",
                "rank": 48,
                "circulating_supply": 133214575156.0,
                "total_supply": 177619433541.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.0011342776,
                        "volume_24h": 3754503.29624008,
                        "market_cap": 151102302.0,
                        "percent_change_1h": 1.05,
                        "percent_change_24h": 3.87,
                        "percent_change_7d": 11.82
                    }
                },
                "last_updated": 1539968324
            },
            "1455": {
                "id": 1455,
                "name": "Golem",
                "symbol": "GNT",
                "website_slug": "golem-network-tokens",
                "rank": 49,
                "circulating_supply": 959242000.0,
                "total_supply": 1000000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.1526393527,
                        "volume_24h": 1084198.67316224,
                        "market_cap": 146418078.0,
                        "percent_change_1h": -0.26,
                        "percent_change_24h": -1.79,
                        "percent_change_7d": 1.95
                    }
                },
                "last_updated": 1539968306
            },
            "1521": {
                "id": 1521,
                "name": "Komodo",
                "symbol": "KMD",
                "website_slug": "komodo",
                "rank": 50,
                "circulating_supply": 110190414.0,
                "total_supply": 110190414.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 1.2768798944,
                        "volume_24h": 1812905.7462026,
                        "market_cap": 140699925.0,
                        "percent_change_1h": -1.27,
                        "percent_change_24h": -1.21,
                        "percent_change_7d": 27.19
                    }
                },
                "last_updated": 1539968307
            },
            "1343": {
                "id": 1343,
                "name": "Stratis",
                "symbol": "STRAT",
                "website_slug": "stratis",
                "rank": 51,
                "circulating_supply": 99059141.0,
                "total_supply": 99059141.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 1.3950935428,
                        "volume_24h": 694779.950663646,
                        "market_cap": 138196768.0,
                        "percent_change_1h": 0.04,
                        "percent_change_24h": -1.7,
                        "percent_change_7d": 5.63
                    }
                },
                "last_updated": 1539968311
            },
            "1104": {
                "id": 1104,
                "name": "Augur",
                "symbol": "REP",
                "website_slug": "augur",
                "rank": 52,
                "circulating_supply": 11000000.0,
                "total_supply": 11000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 12.3945108542,
                        "volume_24h": 1569266.62469018,
                        "market_cap": 136339619.0,
                        "percent_change_1h": 0.24,
                        "percent_change_24h": -0.75,
                        "percent_change_7d": 3.62
                    }
                },
                "last_updated": 1539968311
            },
            "1975": {
                "id": 1975,
                "name": "Chainlink",
                "symbol": "LINK",
                "website_slug": "chainlink",
                "rank": 53,
                "circulating_supply": 350000000.0,
                "total_supply": 1000000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.3622315894,
                        "volume_24h": 995992.957292098,
                        "market_cap": 126781056.0,
                        "percent_change_1h": -0.15,
                        "percent_change_24h": -3.63,
                        "percent_change_7d": 17.2
                    }
                },
                "last_updated": 1539968317
            },
            "1789": {
                "id": 1789,
                "name": "Populous",
                "symbol": "PPT",
                "website_slug": "populous",
                "rank": 54,
                "circulating_supply": 37004027.0,
                "total_supply": 53252246.0,
                "max_supply": 53252246.0,
                "quotes": {
                    "USD": {
                        "price": 3.393997817,
                        "volume_24h": 892338.967927858,
                        "market_cap": 125591587.0,
                        "percent_change_1h": 0.85,
                        "percent_change_24h": 1.77,
                        "percent_change_7d": 6.76
                    }
                },
                "last_updated": 1539968311
            },
            "1759": {
                "id": 1759,
                "name": "Status",
                "symbol": "SNT",
                "website_slug": "status",
                "rank": 55,
                "circulating_supply": 3470483788.0,
                "total_supply": 6804870174.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.0353580237,
                        "volume_24h": 1311936.46397567,
                        "market_cap": 122709448.0,
                        "percent_change_1h": 0.12,
                        "percent_change_24h": -1.82,
                        "percent_change_7d": 0.66
                    }
                },
                "last_updated": 1539968311
            },
            "1925": {
                "id": 1925,
                "name": "Waltonchain",
                "symbol": "WTC",
                "website_slug": "waltonchain",
                "rank": 56,
                "circulating_supply": 40144099.0,
                "total_supply": 70000000.0,
                "max_supply": 100000000.0,
                "quotes": {
                    "USD": {
                        "price": 3.033186038,
                        "volume_24h": 15294562.8571609,
                        "market_cap": 121764522.0,
                        "percent_change_1h": 0.56,
                        "percent_change_24h": -0.49,
                        "percent_change_7d": 10.03
                    }
                },
                "last_updated": 1539968313
            },
            "2027": {
                "id": 2027,
                "name": "Cryptonex",
                "symbol": "CNX",
                "website_slug": "cryptonex",
                "rank": 57,
                "circulating_supply": 55512093.0,
                "total_supply": 106960818.0,
                "max_supply": 210000000.0,
                "quotes": {
                    "USD": {
                        "price": 2.0548566017,
                        "volume_24h": 7397699.9334047,
                        "market_cap": 114069390.0,
                        "percent_change_1h": -3.73,
                        "percent_change_24h": -4.07,
                        "percent_change_7d": 0.92
                    }
                },
                "last_updated": 1539968316
            },
            "1320": {
                "id": 1320,
                "name": "Ardor",
                "symbol": "ARDR",
                "website_slug": "ardor",
                "rank": 58,
                "circulating_supply": 998999495.0,
                "total_supply": 998999495.0,
                "max_supply": 998999495.0,
                "quotes": {
                    "USD": {
                        "price": 0.1123467637,
                        "volume_24h": 1429567.73165434,
                        "market_cap": 112234360.0,
                        "percent_change_1h": 0.04,
                        "percent_change_24h": -1.8,
                        "percent_change_7d": 1.28
                    }
                },
                "last_updated": 1539968311
            },
            "2606": {
                "id": 2606,
                "name": "Wanchain",
                "symbol": "WAN",
                "website_slug": "wanchain",
                "rank": 59,
                "circulating_supply": 106152493.0,
                "total_supply": 210000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.9998660703,
                        "volume_24h": 1890007.9976624,
                        "market_cap": 106138276.0,
                        "percent_change_1h": 1.18,
                        "percent_change_24h": -0.02,
                        "percent_change_7d": 5.81
                    }
                },
                "last_updated": 1539968322
            },
            "2062": {
                "id": 2062,
                "name": "Aion",
                "symbol": "AION",
                "website_slug": "aion",
                "rank": 60,
                "circulating_supply": 242806287.0,
                "total_supply": 465934587.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.4219662789,
                        "volume_24h": 1913430.51562851,
                        "market_cap": 102456065.0,
                        "percent_change_1h": -0.35,
                        "percent_change_24h": -3.09,
                        "percent_change_7d": 10.34
                    }
                },
                "last_updated": 1539968314
            },
            "2405": {
                "id": 2405,
                "name": "IOST",
                "symbol": "IOST",
                "website_slug": "iostoken",
                "rank": 61,
                "circulating_supply": 8400000000.0,
                "total_supply": 21000000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.011909849,
                        "volume_24h": 4935992.75594109,
                        "market_cap": 100042731.0,
                        "percent_change_1h": -0.41,
                        "percent_change_24h": -0.05,
                        "percent_change_7d": 5.71
                    }
                },
                "last_updated": 1539968323
            },
            "2608": {
                "id": 2608,
                "name": "Mithril",
                "symbol": "MITH",
                "website_slug": "mithril",
                "rank": 62,
                "circulating_supply": 387392092.0,
                "total_supply": 1000000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.2571759405,
                        "volume_24h": 6270631.18062945,
                        "market_cap": 99627926.0,
                        "percent_change_1h": 0.84,
                        "percent_change_24h": 2.49,
                        "percent_change_7d": 8.88
                    }
                },
                "last_updated": 1539968324
            },
            "2772": {
                "id": 2772,
                "name": "Digitex Futures",
                "symbol": "DGTX",
                "website_slug": "digitex-futures",
                "rank": 63,
                "circulating_supply": 700000000.0,
                "total_supply": 1000000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.1406192858,
                        "volume_24h": 1140507.60079078,
                        "market_cap": 98433500.0,
                        "percent_change_1h": 0.81,
                        "percent_change_24h": 13.93,
                        "percent_change_7d": 56.81
                    }
                },
                "last_updated": 1539968322
            },
            "2087": {
                "id": 2087,
                "name": "KuCoin Shares",
                "symbol": "KCS",
                "website_slug": "kucoin-shares",
                "rank": 64,
                "circulating_supply": 90730576.0,
                "total_supply": 180730576.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 1.0736206946,
                        "volume_24h": 72588.9683746162,
                        "market_cap": 97410224.0,
                        "percent_change_1h": 0.12,
                        "percent_change_24h": -0.87,
                        "percent_change_7d": 4.76
                    }
                },
                "last_updated": 1539968317
            },
            "3134": {
                "id": 3134,
                "name": "ETERNAL TOKEN",
                "symbol": "XET",
                "website_slug": "eternal-token",
                "rank": 65,
                "circulating_supply": 60440001.0,
                "total_supply": 200000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 1.5584051135,
                        "volume_24h": 385542.76159095,
                        "market_cap": 94190007.0,
                        "percent_change_1h": 0.28,
                        "percent_change_24h": -0.67,
                        "percent_change_7d": -17.09
                    }
                },
                "last_updated": 1539968328
            },
            "2874": {
                "id": 2874,
                "name": "Aurora",
                "symbol": "AOA",
                "website_slug": "aurora",
                "rank": 66,
                "circulating_supply": 3542322074.0,
                "total_supply": 10000000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.0262762955,
                        "volume_24h": 502871.654661999,
                        "market_cap": 93079101.0,
                        "percent_change_1h": -0.69,
                        "percent_change_24h": -0.26,
                        "percent_change_7d": 24.99
                    }
                },
                "last_updated": 1539968327
            },
            "2246": {
                "id": 2246,
                "name": "CyberMiles",
                "symbol": "CMT",
                "website_slug": "cybermiles",
                "rank": 67,
                "circulating_supply": 764598429.0,
                "total_supply": 1000000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.1201894729,
                        "volume_24h": 16403068.8591853,
                        "market_cap": 91896682.0,
                        "percent_change_1h": 0.32,
                        "percent_change_24h": 0.21,
                        "percent_change_7d": 3.76
                    }
                },
                "last_updated": 1539968310
            },
            "118": {
                "id": 118,
                "name": "ReddCoin",
                "symbol": "RDD",
                "website_slug": "reddcoin",
                "rank": 68,
                "circulating_supply": 28808713174.0,
                "total_supply": 28808713174.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.0030391158,
                        "volume_24h": 568875.410211995,
                        "market_cap": 87553015.0,
                        "percent_change_1h": -0.85,
                        "percent_change_24h": -3.77,
                        "percent_change_7d": -3.55
                    }
                },
                "last_updated": 1539968285
            },
            "291": {
                "id": 291,
                "name": "MaidSafeCoin",
                "symbol": "MAID",
                "website_slug": "maidsafecoin",
                "rank": 69,
                "circulating_supply": 452552412.0,
                "total_supply": 452552412.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.1933468614,
                        "volume_24h": 606905.222973732,
                        "market_cap": 87499588.0,
                        "percent_change_1h": 0.25,
                        "percent_change_24h": 3.25,
                        "percent_change_7d": -6.24
                    }
                },
                "last_updated": 1539968297
            },
            "1229": {
                "id": 1229,
                "name": "DigixDAO",
                "symbol": "DGD",
                "website_slug": "digixdao",
                "rank": 70,
                "circulating_supply": 2000000.0,
                "total_supply": 2000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 43.538222262,
                        "volume_24h": 422015.424881083,
                        "market_cap": 87076445.0,
                        "percent_change_1h": -0.13,
                        "percent_change_24h": 0.44,
                        "percent_change_7d": 13.6
                    }
                },
                "last_updated": 1539968306
            },
            "1934": {
                "id": 1934,
                "name": "Loopring",
                "symbol": "LRC",
                "website_slug": "loopring",
                "rank": 71,
                "circulating_supply": 788984491.0,
                "total_supply": 1374955752.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.1078741128,
                        "volume_24h": 1273181.39943362,
                        "market_cap": 85111002.0,
                        "percent_change_1h": -0.75,
                        "percent_change_24h": -0.72,
                        "percent_change_7d": 9.31
                    }
                },
                "last_updated": 1539968306
            },
            "2299": {
                "id": 2299,
                "name": "aelf",
                "symbol": "ELF",
                "website_slug": "aelf",
                "rank": 72,
                "circulating_supply": 250000000.0,
                "total_supply": 280000000.0,
                "max_supply": 1000000000.0,
                "quotes": {
                    "USD": {
                        "price": 0.3390306549,
                        "volume_24h": 56752984.8277545,
                        "market_cap": 84757664.0,
                        "percent_change_1h": -0.88,
                        "percent_change_24h": 5.19,
                        "percent_change_7d": 6.8
                    }
                },
                "last_updated": 1539968313
            },
            "1750": {
                "id": 1750,
                "name": "GXChain",
                "symbol": "GXS",
                "website_slug": "gxchain",
                "rank": 73,
                "circulating_supply": 60000000.0,
                "total_supply": 100000000.0,
                "max_supply": 100000000.0,
                "quotes": {
                    "USD": {
                        "price": 1.3868888056,
                        "volume_24h": 1591064.18321608,
                        "market_cap": 83213328.0,
                        "percent_change_1h": 0.71,
                        "percent_change_24h": 0.12,
                        "percent_change_7d": 2.48
                    }
                },
                "last_updated": 1539968312
            },
            "2502": {
                "id": 2502,
                "name": "Huobi Token",
                "symbol": "HT",
                "website_slug": "huobi-token",
                "rank": 74,
                "circulating_supply": 50000200.0,
                "total_supply": 500000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 1.6345488976,
                        "volume_24h": 10502504.6071112,
                        "market_cap": 81727772.0,
                        "percent_change_1h": 0.79,
                        "percent_change_24h": 3.04,
                        "percent_change_7d": 3.25
                    }
                },
                "last_updated": 1539968323
            },
            "1903": {
                "id": 1903,
                "name": "HyperCash",
                "symbol": "HC",
                "website_slug": "hypercash",
                "rank": 75,
                "circulating_supply": 43529781.0,
                "total_supply": 43529781.0,
                "max_supply": 84000000.0,
                "quotes": {
                    "USD": {
                        "price": 1.8688152787,
                        "volume_24h": 661919.231994734,
                        "market_cap": 81349120.0,
                        "percent_change_1h": -0.02,
                        "percent_change_24h": 0.17,
                        "percent_change_7d": 4.31
                    }
                },
                "last_updated": 1539968312
            },
            "1586": {
                "id": 1586,
                "name": "Ark",
                "symbol": "ARK",
                "website_slug": "ark",
                "rank": 76,
                "circulating_supply": 105810278.0,
                "total_supply": 137060278.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.748140282,
                        "volume_24h": 431301.29265545,
                        "market_cap": 79160931.0,
                        "percent_change_1h": 0.15,
                        "percent_change_24h": -2.68,
                        "percent_change_7d": 8.28
                    }
                },
                "last_updated": 1539968306
            },
            "2213": {
                "id": 2213,
                "name": "QASH",
                "symbol": "QASH",
                "website_slug": "qash",
                "rank": 77,
                "circulating_supply": 350000000.0,
                "total_supply": 1000000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.2184351542,
                        "volume_24h": 709733.132422239,
                        "market_cap": 76452304.0,
                        "percent_change_1h": 0.2,
                        "percent_change_24h": -0.11,
                        "percent_change_7d": -1.3
                    }
                },
                "last_updated": 1539968317
            },
            "1757": {
                "id": 1757,
                "name": "FunFair",
                "symbol": "FUN",
                "website_slug": "funfair",
                "rank": 78,
                "circulating_supply": 5179824689.0,
                "total_supply": 10999873621.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.0147493485,
                        "volume_24h": 785555.009933389,
                        "market_cap": 76399040.0,
                        "percent_change_1h": 0.61,
                        "percent_change_24h": -1.78,
                        "percent_change_7d": 3.36
                    }
                },
                "last_updated": 1539968312
            },
            "1169": {
                "id": 1169,
                "name": "PIVX",
                "symbol": "PIVX",
                "website_slug": "pivx",
                "rank": 79,
                "circulating_supply": 56781166.0,
                "total_supply": 56781166.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 1.3123830784,
                        "volume_24h": 2140014.43285278,
                        "market_cap": 74518641.0,
                        "percent_change_1h": 0.43,
                        "percent_change_24h": -3.64,
                        "percent_change_7d": 19.39
                    }
                },
                "last_updated": 1539968307
            },
            "1908": {
                "id": 1908,
                "name": "Nebulas",
                "symbol": "NAS",
                "website_slug": "nebulas-token",
                "rank": 80,
                "circulating_supply": 45500000.0,
                "total_supply": 100000000.0,
                "max_supply": 100000000.0,
                "quotes": {
                    "USD": {
                        "price": 1.6316468813,
                        "volume_24h": 4318096.13386121,
                        "market_cap": 74239933.0,
                        "percent_change_1h": 0.8,
                        "percent_change_24h": 0.63,
                        "percent_change_7d": -12.17
                    }
                },
                "last_updated": 1539968313
            },
            "1876": {
                "id": 1876,
                "name": "Dentacoin",
                "symbol": "DCN",
                "website_slug": "dentacoin",
                "rank": 81,
                "circulating_supply": 325226613094.0,
                "total_supply": 1963173416169.0,
                "max_supply": 8000000000000.0,
                "quotes": {
                    "USD": {
                        "price": 0.0002277192,
                        "volume_24h": 133380.413648055,
                        "market_cap": 74060342.0,
                        "percent_change_1h": 0.52,
                        "percent_change_24h": -1.69,
                        "percent_change_7d": -1.19
                    }
                },
                "last_updated": 1539968312
            },
            "1727": {
                "id": 1727,
                "name": "Bancor",
                "symbol": "BNT",
                "website_slug": "bancor",
                "rank": 82,
                "circulating_supply": 57566831.0,
                "total_supply": 78036028.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 1.27845299,
                        "volume_24h": 4205165.14712719,
                        "market_cap": 73596487.0,
                        "percent_change_1h": -0.02,
                        "percent_change_24h": -0.85,
                        "percent_change_7d": -1.3
                    }
                },
                "last_updated": 1539968312
            },
            "213": {
                "id": 213,
                "name": "MonaCoin",
                "symbol": "MONA",
                "website_slug": "monacoin",
                "rank": 83,
                "circulating_supply": 63067775.0,
                "total_supply": 63067775.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 1.1651117469,
                        "volume_24h": 246026.508702717,
                        "market_cap": 73481005.0,
                        "percent_change_1h": 0.08,
                        "percent_change_24h": -1.35,
                        "percent_change_7d": -2.14
                    }
                },
                "last_updated": 1539968299
            },
            "1966": {
                "id": 1966,
                "name": "Decentraland",
                "symbol": "MANA",
                "website_slug": "decentraland",
                "rank": 84,
                "circulating_supply": 1050141509.0,
                "total_supply": 2644403343.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.0694634309,
                        "volume_24h": 2718420.89050792,
                        "market_cap": 72946432.0,
                        "percent_change_1h": 0.25,
                        "percent_change_24h": -0.63,
                        "percent_change_7d": -0.13
                    }
                },
                "last_updated": 1539968317
            },
            "2403": {
                "id": 2403,
                "name": "MOAC",
                "symbol": "MOAC",
                "website_slug": "moac",
                "rank": 85,
                "circulating_supply": 62463334.0,
                "total_supply": 151205864.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 1.1611994665,
                        "volume_24h": 84606.2912166955,
                        "market_cap": 72532390.0,
                        "percent_change_1h": 0.82,
                        "percent_change_24h": 0.44,
                        "percent_change_7d": -8.97
                    }
                },
                "last_updated": 1539968320
            },
            "2588": {
                "id": 2588,
                "name": "Loom Network",
                "symbol": "LOOM",
                "website_slug": "loom-network",
                "rank": 86,
                "circulating_supply": 600938533.0,
                "total_supply": 1000000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.1188644519,
                        "volume_24h": 2985705.78786588,
                        "market_cap": 71430229.0,
                        "percent_change_1h": 0.95,
                        "percent_change_24h": -3.28,
                        "percent_change_7d": -3.89
                    }
                },
                "last_updated": 1539968327
            },
            "2591": {
                "id": 2591,
                "name": "Dropil",
                "symbol": "DROP",
                "website_slug": "dropil",
                "rank": 87,
                "circulating_supply": 22419988583.0,
                "total_supply": 30000000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.0031676999,
                        "volume_24h": 509391.004096598,
                        "market_cap": 71019795.0,
                        "percent_change_1h": -4.78,
                        "percent_change_24h": -4.42,
                        "percent_change_7d": 9.18
                    }
                },
                "last_updated": 1539968321
            },
            "2492": {
                "id": 2492,
                "name": "Elastos",
                "symbol": "ELA",
                "website_slug": "elastos",
                "rank": 88,
                "circulating_supply": 7722239.0,
                "total_supply": 33647865.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 9.1655492828,
                        "volume_24h": 2440225.61378025,
                        "market_cap": 70778564.0,
                        "percent_change_1h": -0.26,
                        "percent_change_24h": -5.58,
                        "percent_change_7d": 9.07
                    }
                },
                "last_updated": 1539968319
            },
            "2496": {
                "id": 2496,
                "name": "Polymath",
                "symbol": "POLY",
                "website_slug": "polymath-network",
                "rank": 89,
                "circulating_supply": 285217107.0,
                "total_supply": 1000000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.2455095286,
                        "volume_24h": 18977544.1198473,
                        "market_cap": 70023517.0,
                        "percent_change_1h": 1.28,
                        "percent_change_24h": 8.14,
                        "percent_change_7d": 29.63
                    }
                },
                "last_updated": 1539968320
            },
            "1776": {
                "id": 1776,
                "name": "Crypto.com",
                "symbol": "MCO",
                "website_slug": "crypto-com",
                "rank": 90,
                "circulating_supply": 15793831.0,
                "total_supply": 31587682.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 4.4275437645,
                        "volume_24h": 1736283.01720345,
                        "market_cap": 69927878.0,
                        "percent_change_1h": 0.68,
                        "percent_change_24h": -2.25,
                        "percent_change_7d": 7.39
                    }
                },
                "last_updated": 1539968307
            },
            "2132": {
                "id": 2132,
                "name": "Power Ledger",
                "symbol": "POWR",
                "website_slug": "power-ledger",
                "rank": 91,
                "circulating_supply": 387265912.0,
                "total_supply": 1000000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.1781009943,
                        "volume_24h": 5861146.78993832,
                        "market_cap": 68972444.0,
                        "percent_change_1h": -0.71,
                        "percent_change_24h": 2.65,
                        "percent_change_7d": 10.21
                    }
                },
                "last_updated": 1539968317
            },
            "2694": {
                "id": 2694,
                "name": "Nexo",
                "symbol": "NEXO",
                "website_slug": "nexo",
                "rank": 92,
                "circulating_supply": 646145842.0,
                "total_supply": 1000000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.1030480213,
                        "volume_24h": 1883852.26380566,
                        "market_cap": 66584050.0,
                        "percent_change_1h": 0.59,
                        "percent_change_24h": 2.97,
                        "percent_change_7d": 1.05
                    }
                },
                "last_updated": 1539968324
            },
            "1698": {
                "id": 1698,
                "name": "Horizen",
                "symbol": "ZEN",
                "website_slug": "zencash",
                "rank": 93,
                "circulating_supply": 4967675.0,
                "total_supply": 4967675.0,
                "max_supply": 21000000.0,
                "quotes": {
                    "USD": {
                        "price": 13.1663887255,
                        "volume_24h": 374483.400648274,
                        "market_cap": 65406340.0,
                        "percent_change_1h": 0.44,
                        "percent_change_24h": -0.83,
                        "percent_change_7d": -3.33
                    }
                },
                "last_updated": 1539968309
            },
            "2308": {
                "id": 2308,
                "name": "Dai",
                "symbol": "DAI",
                "website_slug": "dai",
                "rank": 94,
                "circulating_supply": 62948984.0,
                "total_supply": 62948984.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 1.0125411775,
                        "volume_24h": 11605513.8142898,
                        "market_cap": 63738438.0,
                        "percent_change_1h": 0.34,
                        "percent_change_24h": 2.12,
                        "percent_change_7d": 1.54
                    }
                },
                "last_updated": 1539968321
            },
            "2300": {
                "id": 2300,
                "name": "WAX",
                "symbol": "WAX",
                "website_slug": "wax",
                "rank": 95,
                "circulating_supply": 934793407.0,
                "total_supply": 1850000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.0668711996,
                        "volume_24h": 231756.837366947,
                        "market_cap": 62510756.0,
                        "percent_change_1h": -0.57,
                        "percent_change_24h": 0.11,
                        "percent_change_7d": 4.72
                    }
                },
                "last_updated": 1539968321
            },
            "2181": {
                "id": 2181,
                "name": "Genesis Vision",
                "symbol": "GVT",
                "website_slug": "genesis-vision",
                "rank": 96,
                "circulating_supply": 4417123.0,
                "total_supply": 4436644.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 13.8976675834,
                        "volume_24h": 3442352.26636646,
                        "market_cap": 61387703.0,
                        "percent_change_1h": 1.27,
                        "percent_change_24h": 9.79,
                        "percent_change_7d": 22.8
                    }
                },
                "last_updated": 1539968320
            },
            "2416": {
                "id": 2416,
                "name": "Theta Token",
                "symbol": "THETA",
                "website_slug": "theta-token",
                "rank": 97,
                "circulating_supply": 705002689.0,
                "total_supply": 1000000000.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.0865807849,
                        "volume_24h": 867299.323890746,
                        "market_cap": 61039686.0,
                        "percent_change_1h": 0.16,
                        "percent_change_24h": -2.3,
                        "percent_change_7d": 2.01
                    }
                },
                "last_updated": 1539968321
            },
            "66": {
                "id": 66,
                "name": "Nxt",
                "symbol": "NXT",
                "website_slug": "nxt",
                "rank": 98,
                "circulating_supply": 998999942.0,
                "total_supply": 998999942.0,
                "max_supply": 1000000000.0,
                "quotes": {
                    "USD": {
                        "price": 0.0605188753,
                        "volume_24h": 652939.814349622,
                        "market_cap": 60458353.0,
                        "percent_change_1h": 0.28,
                        "percent_change_24h": -0.92,
                        "percent_change_7d": -2.06
                    }
                },
                "last_updated": 1539968281
            },
            "1758": {
                "id": 1758,
                "name": "TenX",
                "symbol": "PAY",
                "website_slug": "tenx",
                "rank": 99,
                "circulating_supply": 109347861.0,
                "total_supply": 205218256.0,
                "max_supply": null,
                "quotes": {
                    "USD": {
                        "price": 0.5469273348,
                        "volume_24h": 357888.732951866,
                        "market_cap": 59805334.0,
                        "percent_change_1h": 0.25,
                        "percent_change_24h": -3.64,
                        "percent_change_7d": -4.02
                    }
                },
                "last_updated": 1539968311
            },
            "2577": {
                "id": 2577,
                "name": "Ravencoin",
                "symbol": "RVN",
                "website_slug": "ravencoin",
                "rank": 100,
                "circulating_supply": 2056240000.0,
                "total_supply": 2056240000.0,
                "max_supply": 21000000000.0,
                "quotes": {
                    "USD": {
                        "price": 0.0290001928,
                        "volume_24h": 18263339.2349611,
                        "market_cap": 59631356.0,
                        "percent_change_1h": 0.81,
                        "percent_change_24h": -8.15,
                        "percent_change_7d": 45.77
                    }
                },
                "last_updated": 1539968335
            }
        }
    }
};

function toHex(s) {
    var hex = '';
    for (var i = 0; i < s.length; i++) {
        hex += '' + s.charCodeAt(i).toString(16);
    }
    return `0x${hex}`;
}

function waitSeconds(seconds) {
    return new Promise((resolve, reject) => {
        setTimeout(() => {
            resolve();
        }, seconds * 1000);
    });
}

function dateToSeconds(current_date) {
    return Math.floor(new Date(current_date).getTime() / 1000);
}

$('#solidBetTransactionModal').on('hidden.bs.modal', function (e) {
    $('#solidBetTransactionModalBody').html('');
});

$('#addTickerModal').on('hidden.bs.modal', function (e) {
    App.currencyId = null;
});

$('#addMatchModal').on('hidden.bs.modal', function (e) {
    App.matchId = null;
});

onload = async () => {
    await App.getTickersData();
    $(document).on('click', '#subscribe_sports_button', App.subscribeMatchContract);
    $(document).on('click', '#subscribe_crypto_button', App.subscribeCryptoContract);
    $(document).on('click', '#add_ticker_button', App.createCryptoBetContract);
    $(document).on('click', '#add_sports_button', App.createMatchesBetContract);
    $(document).on('click', '#fetch_bets_button', App.getBets);
    await App.initWeb3();
    await App.load();
    let pathname = window.location.pathname;
    let link = window.location.href;
    let splitted = link.replace("http://", "");

    // console.log(pathname);
    // console.log(window.location.href);
    splitted = splitted.split("/");
    if (splitted.length === 2 && splitted[1] === 'matches') {
        App.displayMatches();
        App.showBets('sports')
    }

    if (splitted.length === 2 && splitted[1] === 'crypto') {
        await App.displayTickers();
        App.showBets('crypto');
    }

    if (splitted.length === 2 && splitted[1] === 'history') {
        App.getInactiveBets();
    }

    if (splitted.length === 3 && splitted[1] === 'contracts' && !isNaN(+splitted[2])) {
        await App.getContracts(+splitted[2]);
    }

    if (splitted.length === 3 && splitted[1] === 'matches' && !isNaN(+splitted[2])) {
        await App.getMatchDetails(+splitted[2]);
    }

    if (splitted.length === 4 && splitted[1] === 'contracts' && !isNaN(+splitted[2])) {
        App.getContract(+splitted[2], splitted[3]);
        App.uuid = +splitted[2];
        App.betId = splitted[3];
    }
};

function formatTime(_timestamp) {
    let current_date = new Date(_timestamp);
    return `${current_date.getUTCDate()}-${current_date.getUTCMonth() + 1}-${current_date.getFullYear()} ${current_date.toLocaleTimeString()}`;
}